{"version":3,"sources":["utils/index.js","i18n/index.js","libs/languages.js","libs/Sub.js","libs/readSub/ass2vtt.js","libs/readSub/index.js","libs/readSub/sub2ass.js","libs/googleTranslate.js","components/Tool.js","libs/readSub/srt2vtt.js","components/Subtitles.js","libs/backlight.js","components/postRequestErrorHandling.js","components/Player.js","components/Timeline.js","components/Metronome.js","components/Footer.js","components/Loading.js","components/ProgressBar.js","App.js","Mobile.js","GlobalStyle.js","index.js"],"names":["userAgent","window","navigator","isMobile","test","getExt","url","trim","toLowerCase","split","pop","sleep","ms","Promise","resolve","setTimeout","download","name","elink","document","createElement","style","display","href","body","appendChild","click","removeChild","getKeyCode","event","tag","activeElement","tagName","toUpperCase","editable","getAttribute","Number","keyCode","isPlaying","$video","currentTime","paused","ended","readyState","zh","LOADING","SUB_TEXT","OPEN_VIDEO","OPEN_SUB","EXPORT_ASS","EXPORT_SRT","EXPORT_VTT","EXPORT_VIDEO","TRANSLATE","TRANSLATING","TRANSLAT_SUCCESS","DECODE_START","DECODE_SUCCESS","DECODE_ERROR","VIDEO_EXT_ERR","SUB_EXT_ERR","MOBILE_TIP","HOTKEY_01","HOTKEY_02","CLEAR","UNDO","DELETE","MERGE","SPLIT","LOADING_FFMPEG","LOADING_FONT","LOADING_VIDEO","LOADING_SUB","CLEAR_TIP","BURN_ERROR","BURN_START","BURN_SUCCESS","OPEN_VIDEO_ERROR","i18n","en","OPEN_VIDEO_TWO","it","tr","key","languages","Sub","obj","this","start","end","text","text2","startTime","endTime","DT","t2d","time","d2t","clamp","Infinity","parseFloat","toFixed","ass2vtt","ass","re_ass","RegExp","fixTime","map","item","index","arr","length","join","line","m","match","replace","filter","url2sub","$track","default","kind","onload","Array","from","track","cues","src","vtt2url","vtt","URL","createObjectURL","Blob","type","toSubTime","str","n","sx","x","slice","toString","unshift","Math","floor","sub2ass","sub","translate","query","lang","searchParams","append","reject","fetch","then","data","json","catch","err","a","subtitle","result","loop","shift","push","Style","styled","div","FFmpeg","createFFmpeg","log","load","fs","SimpleFS","FileSystem","Header","player","waveform","newSub","undoSubs","clearSubs","language","setLoading","formatSub","setSubtitle","setProcessing","notify","useState","setTranslate","videoFile","setVideoFile","decodeAudioData","useCallback","file","fetchFile","ffmpeg","setProgress","ratio","t","FS","message","level","output","Date","now","run","uint8","decoder","drawer","update","burnSubtitles","mkdir","exists","readFile","fontBlob","res","blob","writeFile","subtitleFile","File","onVideoChange","target","files","ext","canPlayType","destroy","seek","onSubtitleChange","includes","reader","FileReader","JSON","parse","error","concat","readAsText","file2sub","onInputClick","value","downloadSub","sub2srt","sub2txt","stringify","onTranslate","googleTranslate","className","onChange","onClick","show","setShow","crossOriginIsolated","confirm","location","reload","Subtitles","currentIndex","checkSub","updateSub","height","setHeight","resize","clientHeight","useEffect","init","debounceResize","debounce","addEventListener","headerHeight","width","rowHeight","scrollToIndex","rowCount","rowGetter","headerRowRenderer","rowRenderer","props","pause","duration","rowData","maxLength","spellCheck","unescape","matrixCallback","callback","xIndex","yIndex","y","backlight","$player","element","styles","$backlight","classList","add","position","zIndex","left","top","right","bottom","Object","keys","forEach","setStyle","parent","matrix","$box","borderRadius","transition","$canvas","clientWidth","colors","ctx","getContext","drawImage","itemW","itemH","itemX","itemY","r","g","b","getImageData","i","l","getColors","boxShadow","insertBefore","requestAnimationFrame","PostRequestErrorHandling","state","postId","errorMessage","requestOptions","method","headers","title","response","isJson","get","console","ok","status","setState","id","React","Component","VideoWrap","memo","setPlayer","setCurrentTime","setPlaying","createRef","current","play","ref","Player","currentSub","setCurrentSub","focusing","setFocusing","inputItemCursor","setInputItemCursor","useMemo","selectionStart","onFocus","onBlur","onSplit","splitSub","playing","onKeyDown","Timeline","magnetically","closeTime","lastTarget","lastSub","lastType","lastX","lastIndex","lastWidth","lastDiffX","isDroging","subs","beginTime","render","removeSub","hasSub","mergeSub","$blockRef","$subsRef","currentSubs","gridGap","gridNum","findIndex","onMouseDown","button","pageX","indexOf","children","onDocumentMouseMove","transform","onDocumentMouseUp","timeDiff","previou","next","removeEventListener","padding","onDoubleClick","$subs","currentTarget","holdToDisplay","prevProps","nextProps","isEqual","Metronome","addSub","setIsDroging","drogStartTime","setDrogStartTime","drogEndTime","setDrogEndTime","getEventTime","clickTime","onMouseMove","Waveform","setWaveform","setRender","$waveform","WFPlayer","instances","scrollable","useWorker","wave","pixelRatio","container","mediaElement","backgroundColor","waveColor","progressColor","gridColor","rulerColor","paddingColor","on","Grab","grabStartX","setGrabStartX","grabStartTime","setGrabStartTime","grabbing","setGrabbing","onGrabDown","onGrabUp","onGrabMove","Progress","onProgressClick","Duration","getDuration","Footer","$footer","onWheel","contains","deltaY","sign","onWheelThrottle","throttle","Fragment","Loading","loading","alt","processing","App","defaultLang","subtitleHistory","useRef","notificationSystem","setLanguage","setSubtitleOriginal","setCurrentIndex","isArray","copySubs","newSubtitle","saveToHistory","localStorage","setItem","previous","check","notification","clearNotifications","addNotification","dismissible","autoDismiss","splice","subClone","assign","merge","text1","splitDuration","middleTime","preventDefault","metaKey","localSubtitleString","getItem","fetchSubtitle","localSubtitle","allowHTML","Mobile","createGlobalStyle","setTranslations","setLocale","ReactDOM","GlobalStyle","getElementById"],"mappings":"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","file":"static/js/main.44145cc0.chunk.js","sourcesContent":["export const userAgent = window.navigator.userAgent;\nexport const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);\n\nexport function getExt(url) {\n    return url.trim().toLowerCase().split('.').pop();\n}\n\nexport function sleep(ms = 0) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nexport function download(url, name) {\n    const elink = document.createElement('a');\n    elink.style.display = 'none';\n    elink.href = url;\n    elink.download = name;\n    document.body.appendChild(elink);\n    elink.click();\n    document.body.removeChild(elink);\n}\n\nexport function getKeyCode(event) {\n    const tag = document.activeElement.tagName.toUpperCase();\n    const editable = document.activeElement.getAttribute('contenteditable');\n    if (tag !== 'INPUT' && tag !== 'TEXTAREA' && editable !== '' && editable !== 'true') {\n        return Number(event.keyCode);\n    }\n}\n\nexport function isPlaying($video) {\n    return !!($video.currentTime > 0 && !$video.paused && !$video.ended && $video.readyState > 2);\n}\n","const en = {\n    LOADING: 'Loading...',\n    SUB_TEXT: 'Subtitle Text',\n    OPEN_VIDEO: 'Open Video',\n    OPEN_VIDEO_TWO: 'Import Youtube Video',\n    OPEN_SUB: 'Open Subtitle',\n    EXPORT_ASS: 'Export ASS',\n    EXPORT_SRT: 'Export SRT',\n    EXPORT_VTT: 'Export VTT',\n    EXPORT_VIDEO: 'Export Video',\n    TRANSLATE: 'Translation',\n    TRANSLATING: 'Translation...',\n    TRANSLAT_SUCCESS: 'Translation success',\n    DECODE_START: 'Start decoding audio',\n    DECODE_SUCCESS: 'Decoding audio success',\n    DECODE_ERROR: 'Decoding audio failed',\n    VIDEO_EXT_ERR: 'Unable to open this video format',\n    SUB_EXT_ERR: 'Unable to open this subtitle format',\n    MOBILE_TIP: 'Please use computer access',\n    HOTKEY_01: 'Space: Play / Pause',\n    HOTKEY_02: 'Ctrl + Z: Undo',\n    CLEAR: 'Clear',\n    UNDO: 'Undo',\n    DELETE: 'Delete Subtitle',\n    MERGE: 'Merge Next',\n    SPLIT: 'Split Subtitle',\n    LOADING_FFMPEG: 'Loading dependency...',\n    LOADING_FONT: 'Loading font...',\n    LOADING_VIDEO: 'Loading video...',\n    LOADING_SUB: 'Loading subtitle...',\n    CLEAR_TIP: 'Confirm that all data is cleared',\n    BURN_ERROR: 'Burn subtitles failed',\n    BURN_START: 'Start burn subtitles',\n    BURN_SUCCESS: 'Burn subtitles success',\n    OPEN_VIDEO_ERROR: 'Please open the video first',\n};\n\nconst it = {\n    LOADING: \"Caricamento in corso...\",\n    SUB_TEXT: \"Sottotitoli\",\n    OPEN_VIDEO: \"Apri video\",\n    OPEN_SUB: \"Apri sottotitoli\",\n    EXPORT_ASS: \"Esporta ASS\",\n    EXPORT_SRT: \"Esporta SRT\",\n    EXPORT_VTT: \"Esporta VTT\",\n    EXPORT_VIDEO: \"Esporta video\",\n    TRANSLATE: 'Traduci',\n    TRANSLATING: 'Traduzione...',\n    TRANSLAT_SUCCESS: \"Traduzione riuscita\",\n    DECODE_START: \"Avvia decodifica audio\",\n    DECODE_SUCCESS: \"Decodifica audio riuscita\",\n    DECODE_ERROR: \"Decodifica audio non riuscita\",\n    VIDEO_EXT_ERR: \"Impossibile aprire questo formato video\",\n    SUB_EXT_ERR: \"Impossibile aprire questo formato di sottotitoli\",\n    MOBILE_TIP: \"Utilizza l'accesso al computer\",\n    HOTKEY_01: \"Spazio: Riproduci / Pausa\",\n    HOTKEY_02: \"Ctrl + Z: Annulla\",\n    CLEAR: \"Pulisci\",\n    UNDO: \"Annulla\",\n    DELETE: \"Elimina sottotitoli\",\n    MERGE: \"Unisci dopo\",\n    SPLIT: \"Dividi sottotitoli\",\n    LOADING_FFMPEG: \"Caricamento dipendenza in corso...\",\n    LOADING_FONT: \"Caricamento font in corso...\",\n    LOADING_VIDEO: \"Caricamento video in corso...\",\n    LOADING_SUB: \"Caricamento sottotitoli in corso...\",\n    CLEAR_TIP: \"Conferma che tutti i dati siano stati cancellati\",\n    BURN_ERROR: \"Masterizzazione sottotitoli non riuscita\",\n    BURN_START: \"Avvia masterizzazione sottotitoli\",\n    BURN_SUCCESS: \"Masterizzazione sottotitoli riuscita\",\n    OPEN_VIDEO_ERROR: \"Apri prima il video\",\n};\n\nconst tr = {\n    LOADING: 'Loading...',\n    SUB_TEXT: 'Subtitle Text',\n    OPEN_VIDEO: 'Video A',\n    OPEN_SUB: 'Altyaz A',\n    EXPORT_ASS: 'ASS kar',\n    EXPORT_SRT: 'SRT kar',\n    EXPORT_VTT: 'VTT kar',\n    EXPORT_VIDEO: 'Videoyu kar',\n    TRANSLATE: 'evir',\n    TRANSLATING: 'evriliyor...',\n    TRANSLAT_SUCCESS: 'evirme baarl',\n    DECODE_START: 'Ses zmlemesi balad',\n    DECODE_SUCCESS: 'Ses zmlemesi baarl',\n    DECODE_ERROR: 'Ses zmlemesi baarsz',\n    VIDEO_EXT_ERR: 'Bu video biimi alamyor',\n    SUB_EXT_ERR: 'Bu altyaz biimi alamyor',\n    MOBILE_TIP: 'Ltfen bilgisayardan eriin',\n    HOTKEY_01: 'Boluk: Oynat / Duraklat',\n    HOTKEY_02: 'Ctrl + Z: Geri Al',\n    CLEAR: 'Temizle',\n    UNDO: 'Geri Al',\n    DELETE: 'Altyazy Sil',\n    MERGE: 'Sonrakiyle Birletir',\n    SPLIT: 'Altyazy Bl',\n    LOADING_FFMPEG: 'Bamllk ykleniyor...',\n    CLEAR_TIP: 'Tm verilerin silineceini onaylyor musunuz?',\n    BURN_ERROR: 'Altyaz gmme baarsz',\n    BURN_START: 'Altyaz gmmeyi balat',\n    BURN_SUCCESS: 'Altyaz gmme baarl',\n    OPEN_VIDEO_ERROR: 'Ltfen nce videoyu an',\n};\n\nconst zh = {\n    LOADING: '...',\n    SUB_TEXT: '',\n    OPEN_VIDEO: '',\n    OPEN_SUB: '',\n    EXPORT_ASS: ' ASS',\n    EXPORT_SRT: ' SRT',\n    EXPORT_VTT: ' VTT',\n    EXPORT_VIDEO: '',\n    TRANSLATE: '',\n    TRANSLATING: '...',\n    TRANSLAT_SUCCESS: '',\n    DECODE_START: '',\n    DECODE_SUCCESS: '',\n    DECODE_ERROR: '',\n    VIDEO_EXT_ERR: '',\n    SUB_EXT_ERR: '',\n    MOBILE_TIP: '',\n    HOTKEY_01: ':  / ',\n    HOTKEY_02: 'Ctrl + Z: ',\n    CLEAR: '',\n    UNDO: '',\n    DELETE: '',\n    MERGE: '',\n    SPLIT: '',\n    LOADING_FFMPEG: '...',\n    LOADING_FONT: '...',\n    LOADING_VIDEO: '...',\n    LOADING_SUB: '...',\n    CLEAR_TIP: '',\n    BURN_ERROR: '',\n    BURN_START: '',\n    BURN_SUCCESS: '',\n    OPEN_VIDEO_ERROR: '',\n};\n\nconst i18n = {\n    en,\n    it,\n    zh,\n    'zh-cn': zh,\n    'zh-tw': zh,\n    tr,\n};\n\nexport default i18n;\n","// https://cloud.google.com/translate/docs/languages\n\nconst zh = [\n    { name: '', key: 'zh' },\n    { name: '', key: 'zh-TW' },\n    { name: '', key: 'en' },\n    { name: '', key: 'af' },\n    { name: '', key: 'sq' },\n    { name: '', key: 'am' },\n    { name: '', key: 'ar' },\n    { name: '', key: 'hy' },\n    { name: '', key: 'az' },\n    { name: '', key: 'eu' },\n    { name: '', key: 'be' },\n    { name: '', key: 'bn' },\n    { name: '', key: 'bs' },\n    { name: '', key: 'bg' },\n    { name: '', key: 'ca' },\n    { name: '', key: 'ceb' },\n    { name: '', key: 'co' },\n    { name: '', key: 'hr' },\n    { name: '', key: 'cs' },\n    { name: '', key: 'da' },\n    { name: '', key: 'nl' },\n    { name: '', key: 'eo' },\n    { name: '', key: 'et' },\n    { name: '', key: 'fi' },\n    { name: '', key: 'fr' },\n    { name: '', key: 'fy' },\n    { name: '', key: 'gl' },\n    { name: '', key: 'ka' },\n    { name: '', key: 'de' },\n    { name: '', key: 'el' },\n    { name: '', key: 'gu' },\n    { name: '', key: 'ht' },\n    { name: '', key: 'ha' },\n    { name: '', key: 'haw' },\n    { name: '', key: 'he' },\n    { name: '', key: 'hi' },\n    { name: '', key: 'hmn' },\n    { name: '', key: 'hu' },\n    { name: '', key: 'is' },\n    { name: '', key: 'ig' },\n    { name: '', key: 'id' },\n    { name: '', key: 'ga' },\n    { name: '', key: 'it' },\n    { name: '', key: 'ja' },\n    { name: '', key: 'jw' },\n    { name: '', key: 'kn' },\n    { name: '', key: 'kk' },\n    { name: '', key: 'km' },\n    { name: '', key: 'ko' },\n    { name: '', key: 'ku' },\n    { name: '', key: 'ky' },\n    { name: '', key: 'lo' },\n    { name: '', key: 'la' },\n    { name: '', key: 'lv' },\n    { name: '', key: 'lt' },\n    { name: '', key: 'lb' },\n    { name: '', key: 'mk' },\n    { name: '', key: 'mg' },\n    { name: '', key: 'ms' },\n    { name: '', key: 'ml' },\n    { name: '', key: 'mt' },\n    { name: '', key: 'mi' },\n    { name: '', key: 'mr' },\n    { name: '', key: 'mn' },\n    { name: '', key: 'my' },\n    { name: '', key: 'ne' },\n    { name: '', key: 'no' },\n    { name: '', key: 'ny' },\n    { name: '', key: 'ps' },\n    { name: '', key: 'fa' },\n    { name: '', key: 'pl' },\n    { name: '', key: 'pt' },\n    { name: '', key: 'pa' },\n    { name: '', key: 'ro' },\n    { name: '', key: 'ru' },\n    { name: '', key: 'sm' },\n    { name: '', key: 'gd' },\n    { name: '', key: 'sr' },\n    { name: '', key: 'st' },\n    { name: '', key: 'sn' },\n    { name: '', key: 'sd' },\n    { name: '', key: 'si' },\n    { name: '', key: 'sk' },\n    { name: '', key: 'sl' },\n    { name: '', key: 'so' },\n    { name: '', key: 'es' },\n    { name: '', key: 'su' },\n    { name: '', key: 'sw' },\n    { name: '', key: 'sv' },\n    { name: '', key: 'tl' },\n    { name: '', key: 'tg' },\n    { name: '', key: 'ta' },\n    { name: '', key: 'te' },\n    { name: '', key: 'th' },\n    { name: '', key: 'tr' },\n    { name: '', key: 'uk' },\n    { name: '', key: 'ur' },\n    { name: '', key: 'uz' },\n    { name: '', key: 'vi' },\n    { name: '', key: 'cy' },\n    { name: '', key: 'xh' },\n    { name: '', key: 'yi' },\n    { name: '', key: 'yo' },\n    { name: '', key: 'zu' },\n];\n\nconst en = [\n    { name: 'English', key: 'en' },\n    { name: 'Bengali', key: 'bn' },\n    { name: 'Gujarati', key: 'gu' },\n    { name: 'Hindi', key: 'hi' },\n    { name: 'Kannada', key: 'kn' },\n    { name: 'Malayalam', key: 'ml' },\n    { name: 'Marathi', key: 'mr' },\n    { name: 'Punjabi', key: 'pa' },\n    { name: 'Nepali', key: 'ne' },\n    { name: 'Tamil', key: 'ta' },\n    { name: 'Telugu', key: 'te' },\n    { name: 'Sinhala', key: 'si' },\n    { name: 'Urdu', key: 'ur' },\n \n];\n\nconst tr = [\n    { name: 'Basitletirilmi ince', key: 'zh' },\n    { name: 'Geleneksel ince', key: 'zh-TW' },\n    { name: 'ngilizce', key: 'en' },\n    { name: 'Afrikaanca', key: 'af' },\n    { name: 'Arnavuta', key: 'sq' },\n    { name: 'Amharca', key: 'am' },\n    { name: 'Arapa', key: 'ar' },\n    { name: 'Ermenice', key: 'hy' },\n    { name: 'Azerbaycanca', key: 'az' },\n    { name: 'Baska', key: 'eu' },\n    { name: 'Belarusa', key: 'be' },\n    { name: 'Bengalce', key: 'bn' },\n    { name: 'Bonaka', key: 'bs' },\n    { name: 'Bulgarca', key: 'bg' },\n    { name: 'Katalanca', key: 'ca' },\n    { name: 'Sabuanca', key: 'ceb' },\n    { name: 'Korsikaca', key: 'co' },\n    { name: 'Hrvata', key: 'hr' },\n    { name: 'eke', key: 'cs' },\n    { name: 'Danca', key: 'da' },\n    { name: 'Felemenke', key: 'nl' },\n    { name: 'Esperanto', key: 'eo' },\n    { name: 'Estonca', key: 'et' },\n    { name: 'Fince', key: 'fi' },\n    { name: 'Franszca', key: 'fr' },\n    { name: 'Frizce', key: 'fy' },\n    { name: 'Galiyaca', key: 'gl' },\n    { name: 'Grcce', key: 'ka' },\n    { name: 'Almanca', key: 'de' },\n    { name: 'Yunanca', key: 'el' },\n    { name: 'Gucerata', key: 'gu' },\n    { name: 'Haiti Kreyolu', key: 'ht' },\n    { name: 'Hausaca', key: 'ha' },\n    { name: 'Hawaii dili', key: 'haw' },\n    { name: 'branice', key: 'he' },\n    { name: 'Hinte', key: 'hi' },\n    { name: 'Hmong', key: 'hmn' },\n    { name: 'Macarca', key: 'hu' },\n    { name: 'zlandaca', key: 'is' },\n    { name: 'gbo dili', key: 'ig' },\n    { name: 'Endonezce', key: 'id' },\n    { name: 'rlandaca', key: 'ga' },\n    { name: 'talyanca', key: 'it' },\n    { name: 'Japonca', key: 'ja' },\n    { name: 'Cava dili', key: 'jw' },\n    { name: 'Kannada dili', key: 'kn' },\n    { name: 'Kazaka', key: 'kk' },\n    { name: 'Kmerce', key: 'km' },\n    { name: 'Korece', key: 'ko' },\n    { name: 'Krte', key: 'ku' },\n    { name: 'Krgzca', key: 'ky' },\n    { name: 'Laoca', key: 'lo' },\n    { name: 'Latince', key: 'la' },\n    { name: 'Letonca', key: 'lv' },\n    { name: 'Litvanca', key: 'lt' },\n    { name: 'Lksemburgca', key: 'lb' },\n    { name: 'Makedonca', key: 'mk' },\n    { name: 'Malgaa', key: 'mg' },\n    { name: 'Malayca', key: 'ms' },\n    { name: 'Malayalamca', key: 'ml' },\n    { name: 'Maltaca', key: 'mt' },\n    { name: 'Maorice', key: 'mi' },\n    { name: 'Marathice', key: 'mr' },\n    { name: 'Moolca', key: 'mn' },\n    { name: 'Birmanca', key: 'my' },\n    { name: 'Nepalce', key: 'ne' },\n    { name: 'Norvee', key: 'no' },\n    { name: 'evaca', key: 'ny' },\n    { name: 'Petuca', key: 'ps' },\n    { name: 'Farsa', key: 'fa' },\n    { name: 'Lehe', key: 'pl' },\n    { name: 'Portekizce', key: 'pt' },\n    { name: 'Pencapa', key: 'pa' },\n    { name: 'Rumence', key: 'ro' },\n    { name: 'Rusa', key: 'ru' },\n    { name: 'Samoaca', key: 'sm' },\n    { name: 'skoa Gaelic', key: 'gd' },\n    { name: 'Srpa', key: 'sr' },\n    { name: 'Sotho dili', key: 'st' },\n    { name: 'ona dili', key: 'sn' },\n    { name: 'Since', key: 'sd' },\n    { name: 'Sinhala dili', key: 'si' },\n    { name: 'Slovaka', key: 'sk' },\n    { name: 'Slovence', key: 'sl' },\n    { name: 'Somalice', key: 'so' },\n    { name: 'spanyolca', key: 'es' },\n    { name: 'Sundaca', key: 'su' },\n    { name: 'Svahili', key: 'sw' },\n    { name: 'svee', key: 'sv' },\n    { name: 'Tagalogca', key: 'tl' },\n    { name: 'Tacike', key: 'tg' },\n    { name: 'Tamilce', key: 'ta' },\n];\n\nconst languages = {\n    en,\n    zh,\n    'zh-cn': zh,\n    'zh-tw': zh,\n    tr,\n};\n\nexport default languages;\n","import clamp from 'lodash/clamp';\nimport DT from 'duration-time-conversion';\n\nexport default class Sub {\n    constructor(obj) {\n        this.start = obj.start;\n        this.end = obj.end;\n        this.text = obj.text;\n        this.text2 = obj.text2;\n    }\n\n    get check() {\n        return this.startTime >= 0 && this.endTime >= 0 && this.startTime < this.endTime;\n    }\n\n    get clone() {\n        return new Sub(this);\n    }\n\n    get startTime() {\n        return DT.t2d(this.start);\n    }\n\n    set startTime(time) {\n        this.start = DT.d2t(clamp(time, 0, Infinity));\n    }\n\n    get endTime() {\n        return DT.t2d(this.end);\n    }\n\n    set endTime(time) {\n        this.end = DT.d2t(clamp(time, 0, Infinity));\n    }\n\n    get duration() {\n        return parseFloat((this.endTime - this.startTime).toFixed(3));\n    }\n}\n","export default function ass2vtt(ass) {\n    const re_ass = new RegExp(\n        'Dialogue:\\\\s\\\\d,' +\n            '(\\\\d+:\\\\d\\\\d:\\\\d\\\\d.\\\\d\\\\d),' +\n            '(\\\\d+:\\\\d\\\\d:\\\\d\\\\d.\\\\d\\\\d),' +\n            '([^,]*),' +\n            '([^,]*),' +\n            '(?:[^,]*,){4}' +\n            '([\\\\s\\\\S]*)$',\n        'i',\n    );\n\n    function fixTime(time = '') {\n        return time\n            .split(/[:.]/)\n            .map((item, index, arr) => {\n                if (index === arr.length - 1) {\n                    if (item.length === 1) {\n                        return '.' + item + '00';\n                    } else if (item.length === 2) {\n                        return '.' + item + '0';\n                    }\n                } else {\n                    if (item.length === 1) {\n                        return (index === 0 ? '0' : ':0') + item;\n                    }\n                }\n\n                return index === 0 ? item : index === arr.length - 1 ? '.' + item : ':' + item;\n            })\n            .join('');\n    }\n\n    return (\n        'WEBVTT\\n\\n' +\n        ass\n            .split(/\\r?\\n/)\n            .map((line) => {\n                const m = line.match(re_ass);\n                if (!m) return null;\n                return {\n                    start: fixTime(m[1].trim()),\n                    end: fixTime(m[2].trim()),\n                    text: m[5]\n                        .replace(/{[\\s\\S]*?}/g, '')\n                        .replace(/(\\\\N)/g, '\\n')\n                        .trim()\n                        .split(/\\r?\\n/)\n                        .map((item) => item.trim())\n                        .join('\\n'),\n                };\n            })\n            .filter((line) => line)\n            .map((line, index) => {\n                if (line) {\n                    return index + 1 + '\\n' + line.start + ' --> ' + line.end + '\\n' + line.text;\n                } else {\n                    return '';\n                }\n            })\n            .filter((line) => line.trim())\n            .join('\\n\\n')\n    );\n}\n","import DT from 'duration-time-conversion';\nimport { getExt } from '../../utils';\nimport Sub from '../Sub';\nimport ass2vtt from './ass2vtt';\nimport srt2vtt from './srt2vtt';\n\nexport function url2sub(url) {\n    return new Promise((resolve) => {\n        const $video = document.createElement('video');\n        const $track = document.createElement('track');\n        $track.default = true;\n        $track.kind = 'metadata';\n        $video.appendChild($track);\n        $track.onload = () => {\n            resolve(\n                Array.from($track.track.cues).map((item) => {\n                    const start = DT.d2t(item.startTime);\n                    const end = DT.d2t(item.endTime);\n                    const text = item.text;\n                    return new Sub({ start, end, text });\n                }),\n            );\n        };\n        $track.src = url;\n    });\n}\n\nexport function vtt2url(vtt) {\n    return URL.createObjectURL(\n        new Blob([vtt], {\n            type: 'text/vtt',\n        }),\n    );\n}\n\nexport function file2sub(file) {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = async () => {\n            const ext = getExt(file.name);\n            if (ext === 'json') {\n                try {\n                    const sub = JSON.parse(reader.result).map((item) => new Sub(item));\n                    resolve(sub);\n                } catch (error) {\n                    reject(error);\n                }\n            } else {\n                const text = reader.result.replace(/{[\\s\\S]*?}/g, '');\n                switch (ext) {\n                    case 'vtt': {\n                        const url = vtt2url(text);\n                        const sub = await url2sub(url);\n                        resolve(sub);\n                        break;\n                    }\n                    case 'ass': {\n                        const vtt = ass2vtt(text);\n                        const url = vtt2url(vtt);\n                        const sub = await url2sub(url);\n                        resolve(sub);\n                        break;\n                    }\n                    case 'srt': {\n                        const vtt = srt2vtt(text);\n                        const url = vtt2url(vtt);\n                        const sub = await url2sub(url);\n                        resolve(sub);\n                        break;\n                    }\n                    case 'json': {\n                        const sub = JSON.parse(text).map((item) => new Sub(item));\n                        resolve(sub);\n                        break;\n                    }\n                    default:\n                        resolve([]);\n                        break;\n                }\n            }\n        };\n        reader.readAsText(file);\n    });\n}\n\nexport function sub2vtt(sub) {\n    return (\n        'WEBVTT\\n\\n' +\n        sub\n            .map((item, index) => {\n                return index + 1 + '\\n' + item.start + ' --> ' + item.end + '\\n' + item.text;\n            })\n            .join('\\n\\n')\n    );\n}\n\nexport function sub2srt(sub) {\n    return sub\n        .map((item, index) => {\n            return `${index + 1}\\n${item.start.replace('.', ',')} --> ${item.end.replace('.', ',')}\\n${item.text}`;\n        })\n        .join('\\n\\n');\n}\n\nexport function sub2txt(sub) {\n    return sub.map((item) => item.text).join('\\n\\n');\n}\n","const toSubTime = (str) => {\n    let n = [];\n    let sx = '';\n    let x = str.split(/[:.]/).map((x) => Number(x));\n    x = str.split(/[:.]/).map((x) => Number(x));\n    x[3] = '0.' + ('00' + x[3]).slice(-3);\n    sx = (x[0] * 60 * 60 + x[1] * 60 + x[2] + Number(x[3])).toFixed(2);\n    sx = sx.toString().split('.');\n    n.unshift(sx[1]);\n    sx = Number(sx[0]);\n    n.unshift(('0' + (sx % 60).toString()).slice(-2));\n    n.unshift(('0' + (Math.floor(sx / 60) % 60).toString()).slice(-2));\n    n.unshift((Math.floor(sx / 3600) % 60).toString());\n    return n.slice(0, 3).join(':') + '.' + n[3];\n};\n\nexport default function sub2ass(sub) {\n    return `\n[Script Info]\n; // \nSynch Point:1\nScriptType:v4.00+\nCollisions:Normal\n\n[V4+ Styles]\nFormat: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding\nStyle: Default, Microsoft YaHei, 20, &H00FFFFFF, &H000000FF, &H00000000, &H00000000, 0, 0, 0, 0, 100, 100, 0, 0, 1, 1, 0, 2, 10, 10, 10, 134\n\n[Events]\nFormat: Layer, Start, End, Style, Actor, MarginL, MarginR, MarginV, Effect, Text\n${sub\n    .map((item) => {\n        const start = toSubTime(item.start);\n        const end = toSubTime(item.end);\n        const text = item.text.replace(/\\r?\\n/g, '\\\\N');\n        return `Dialogue: 0,${start},${end},Default,NTP,0000,0000,0000,,${text}`;\n    })\n    .join('\\n')}\n    `.trim();\n}\n","import { sleep } from '../utils';\n\nfunction translate(query = '', lang) {\n    if (!query.trim()) return Promise.resolve('');\n    const url = new URL('https://translate.googleapis.com/translate_a/single');\n    url.searchParams.append('client', 'gtx');\n    url.searchParams.append('sl', 'auto');\n    url.searchParams.append('dt', 't');\n    url.searchParams.append('tl', lang);\n    url.searchParams.append('q', query);\n\n    return new Promise((resolve, reject) => {\n        fetch(url.href)\n            .then((data) => data.json())\n            .then((data) => {\n                if (data) {\n                    resolve(data[0].map((item) => item[0].trim()).join('\\n'));\n                } else {\n                    resolve('');\n                }\n            })\n            .catch((err) => {\n                reject(err);\n            });\n    });\n}\n\nexport default async function googleTranslate(subtitle = [], lang) {\n    return new Promise((resolve, reject) => {\n        const result = [];\n        (function loop() {\n            const item = subtitle.shift();\n            if (item) {\n                translate(item.text, lang)\n                    .then((text) => {\n                        item.text = text;\n                        result.push(item);\n                        sleep(100).then(loop);\n                    })\n                    .catch((err) => {\n                        reject(err);\n                    });\n            } else {\n                resolve(result);\n            }\n        })();\n    });\n}\n","import styled from 'styled-components';\nimport languages from '../libs/languages';\nimport { t, Translate } from 'react-i18nify';\nimport React, { useState, useCallback } from 'react';\nimport { getExt, download } from '../utils';\nimport { file2sub, sub2vtt, sub2srt, sub2txt } from '../libs/readSub';\nimport sub2ass from '../libs/readSub/sub2ass';\nimport googleTranslate from '../libs/googleTranslate';\nimport FFmpeg from '@ffmpeg/ffmpeg';\nimport SimpleFS from '@forlagshuset/simple-fs';\n//import Toggle from './dropdown';\n\nconst Style = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    padding-bottom: 20px;\n    position: relative;\n    overflow: hidden;\n    background-color: rgb(0 0 0 / 100%);\n    border-left: 1px solid rgb(255 255 255 / 20%);\n\n    .import {\n        display: flex;\n        justify-content: space-between;\n        padding: 10px;\n        border-bottom: 1px solid rgb(255 255 255 / 20%);\n\n        .btn {\n            position: relative;\n            opacity: 0.85;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 35px;\n            width: 48%;\n            border-radius: 3px;\n            color: #fff;\n            cursor: pointer;\n            font-size: 13px;\n            background-color: #3f51b5;\n            transition: all 0.2s ease 0s;\n\n            &:hover {\n                opacity: 1;\n            }\n        }\n\n        .file {\n            position: absolute;\n            left: 0;\n            top: 0;\n            right: 0;\n            bottom: 0;\n            width: 100%;\n            height: 100%;\n            opacity: 0;\n        }\n    }\n\n    .burn {\n        display: flex;\n        justify-content: space-between;\n        padding: 10px;\n        border-bottom: 1px solid rgb(255 255 255 / 20%);\n\n        .btn {\n            position: relative;\n            opacity: 0.85;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 35px;\n            width: 100%;\n            border-radius: 3px;\n            color: #fff;\n            cursor: pointer;\n            font-size: 13px;\n            background-color: #673ab7;\n            transition: all 0.2s ease 0s;\n\n            &:hover {\n                opacity: 1;\n            }\n        }\n    }\n\n    .export {\n        display: flex;\n        justify-content: space-between;\n        padding: 10px;\n        border-bottom: 1px solid rgb(255 255 255 / 20%);\n\n        .btn {\n            position: relative;\n            opacity: 0.85;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 35px;\n            width: 31%;\n            border-radius: 3px;\n            color: #fff;\n            cursor: pointer;\n            font-size: 13px;\n            background-color: #009688;\n            transition: all 0.2s ease 0s;\n\n            &:hover {\n                opacity: 1;\n            }\n        }\n    }\n\n    .operate {\n        display: flex;\n        justify-content: space-between;\n        padding: 10px;\n        border-bottom: 1px solid rgb(255 255 255 / 20%);\n\n        .btn {\n            position: relative;\n            opacity: 0.85;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 35px;\n            width: 48%;\n            border-radius: 3px;\n            color: #fff;\n            cursor: pointer;\n            font-size: 13px;\n            background-color: #009688;\n            transition: all 0.2s ease 0s;\n\n            &:hover {\n                opacity: 1;\n            }\n        }\n    }\n\n    .translate {\n        display: flex;\n        justify-content: space-between;\n        padding: 10px;\n        border-bottom: 1px solid rgb(255 255 255 / 20%);\n\n        select {\n            width: 65%;\n            outline: none;\n            padding: 0 5px;\n            border-radius: 3px;\n        }\n\n        .btn {\n            opacity: 0.85;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 35px;\n            width: 33%;\n            border-radius: 3px;\n            color: #fff;\n            cursor: pointer;\n            font-size: 13px;\n            background-color: #673ab7;\n            transition: all 0.2s ease 0s;\n\n            &:hover {\n                opacity: 1;\n            }\n        }\n    }\n\n    .hotkey {\n        display: flex;\n        justify-content: space-between;\n        padding: 10px;\n\n        span {\n            width: 49%;\n            font-size: 13px;\n            padding: 5px 0;\n            border-radius: 3px;\n            text-align: center;\n            color: rgb(255 255 255 / 75%);\n            background-color: rgb(255 255 255 / 20%);\n        }\n    }\n\n    .bottom {\n        padding: 10px;\n        a {\n            display: flex;\n            flex-direction: column;\n            border: 1px solid rgb(255 255 255 / 30%);\n            text-decoration: none;\n\n            .title {\n                color: #ffeb3b;\n                padding: 5px 10px;\n                animation: animation 3s infinite;\n                border-bottom: 1px solid rgb(255 255 255 / 30%);\n            }\n\n            @keyframes animation {\n                50% {\n                    color: #00bcd4;\n                }\n            }\n\n            img {\n                max-width: 100%;\n            }\n        }\n    }\n\n    .progress {\n        position: fixed;\n        left: 0;\n        top: 0;\n        right: 0;\n        z-index: 9;\n        height: 2px;\n        background-color: rgb(0 0 0 / 50%);\n\n        span {\n            display: inline-block;\n            position: absolute;\n            left: 0;\n            top: 0;\n            bottom: 0;\n            width: 0;\n            height: 100%;\n            background-color: #ff9800;\n            transition: all 0.2s ease 0s;\n        }\n    }\n`;\n\nFFmpeg.createFFmpeg({ log: true }).load();\nconst fs = new SimpleFS.FileSystem();\n\nexport default function Header({\n    player,\n    waveform,\n    newSub,\n    undoSubs,\n    clearSubs,\n    language,\n    subtitle,\n    setLoading,\n    formatSub,\n    setSubtitle,\n    setProcessing,\n    notify,\n}) {\n    const [translate, setTranslate] = useState('en');\n    const [videoFile, setVideoFile] = useState(null);\n  /*  const [show,setShow]=useState(true);\n    \n    const Search = () => {\n        const [showResults, setShowResults] = React.useState(false)\n        const onClick = () => setShowResults(true)\n        return (\n              <div>\n            <input type=\"submit\" value=\"Search\" onClick={onClick} />\n            { showResults ? <Results /> : null }\n          </div>\n        )\n      }*/\n      \n      \n\n      const Toggle = () => {\n        const [show,setShow]=useState(true);\n        return (\n          <div>\n            {\n              show?<h1>Hello, I am Muskan.</h1>:null\n            }\n            <button onClick={()=>setShow(!show)}>Toggle</button>\n          </div>\n        )\n      }\n       \n\n    const decodeAudioData = useCallback(\n        async (file) => {\n            try {\n                const { createFFmpeg, fetchFile } = FFmpeg;\n                const ffmpeg = createFFmpeg({ log: true });\n                ffmpeg.setProgress(({ ratio }) => setProcessing(ratio * 100));\n                setLoading(t('LOADING_FFMPEG'));\n                await ffmpeg.load();\n                ffmpeg.FS('writeFile', file.name, await fetchFile(file));\n                setLoading('');\n                notify({\n                    message: t('DECODE_START'),\n                    level: 'info',\n                });\n                const output = `${Date.now()}.mp3`;\n                await ffmpeg.run('-i', file.name, '-ac', '1', '-ar', '8000', output);\n                const uint8 = ffmpeg.FS('readFile', output);\n                // download(URL.createObjectURL(new Blob([uint8])), `${output}`);\n                await waveform.decoder.decodeAudioData(uint8);\n                waveform.drawer.update();\n                setProcessing(0);\n                ffmpeg.setProgress(() => null);\n                notify({\n                    message: t('DECODE_SUCCESS'),\n                    level: 'success',\n                });\n            } catch (error) {\n                setLoading('');\n                setProcessing(0);\n                notify({\n                    message: t('DECODE_ERROR'),\n                    level: 'error',\n                });\n            }\n        },\n        [waveform, notify, setProcessing, setLoading],\n    );\n\n\n    const burnSubtitles = useCallback(async () => {\n        try {\n            const { createFFmpeg, fetchFile } = FFmpeg;\n            const ffmpeg = createFFmpeg({ log: true });\n            ffmpeg.setProgress(({ ratio }) => setProcessing(ratio * 100));\n            setLoading(t('LOADING_FFMPEG'));\n            await ffmpeg.load();\n            setLoading(t('LOADING_FONT'));\n\n            await fs.mkdir('/fonts');\n            const fontExist = await fs.exists('/fonts/Microsoft-YaHei.ttf');\n            if (fontExist) {\n                const fontBlob = await fs.readFile('/fonts/Microsoft-YaHei.ttf');\n                ffmpeg.FS('writeFile', `tmp/Microsoft-YaHei.ttf`, await fetchFile(fontBlob));\n            } else {\n                const fontUrl = 'https://cdn.jsdelivr.net/gh/zhw2590582/SubPlayer/docs/Microsoft-YaHei.ttf';\n                const fontBlob = await fetch(fontUrl).then((res) => res.blob());\n                await fs.writeFile('/fonts/Microsoft-YaHei.ttf', fontBlob);\n                ffmpeg.FS('writeFile', `tmp/Microsoft-YaHei.ttf`, await fetchFile(fontBlob));\n            }\n            setLoading(t('LOADING_VIDEO'));\n            ffmpeg.FS(\n                'writeFile',\n                videoFile ? videoFile.name : 'alt_video.mp4?t=1',\n                await fetchFile(videoFile || 'alt_video.mp4?t=1'),\n            );\n            setLoading(t('LOADING_SUB'));\n            const subtitleFile = new File([new Blob([sub2ass(subtitle)])], 'subtitle.ass');\n            ffmpeg.FS('writeFile', subtitleFile.name, await fetchFile(subtitleFile));\n            setLoading('');\n            notify({\n                message: t('BURN_START'),\n                level: 'info',\n            });\n            const output = `${Date.now()}.mp4`;\n            await ffmpeg.run(\n                '-i',\n                videoFile ? videoFile.name : 'sample.mp4',\n                '-vf',\n                `ass=${subtitleFile.name}:fontsdir=/tmp`,\n                '-preset',\n                videoFile ? 'fast' : 'ultrafast',\n                output,\n            );\n            const uint8 = ffmpeg.FS('readFile', output);\n            download(URL.createObjectURL(new Blob([uint8])), `${output}`);\n            setProcessing(0);\n            ffmpeg.setProgress(() => null);\n            notify({\n                message: t('BURN_SUCCESS'),\n                level: 'success',\n            });\n        } catch (error) {\n            setLoading('');\n            setProcessing(0);\n            notify({\n                message: t('BURN_ERROR'),\n                level: 'error',\n            });\n        }\n    }, [notify, setProcessing, setLoading, videoFile, subtitle]);\n\n    const onVideoChange = useCallback(\n        (event) => {\n            const file = event.target.files[0];\n            if (file) {\n                const ext = getExt(file.name);\n                const canPlayType = player.canPlayType(file.type);\n                if (canPlayType === 'maybe' || canPlayType === 'probably') {\n                    setVideoFile(file);\n                    decodeAudioData(file);\n                    const url = URL.createObjectURL(new Blob([file]));\n                    waveform.decoder.destroy();\n                    waveform.drawer.update();\n                    waveform.seek(0);\n                    player.currentTime = 0;\n                    clearSubs();\n                    setSubtitle([\n                        newSub({\n                            start: '00:00:00.000',\n                            end: '00:00:01.000',\n                            text: t('SUB_TEXT'),\n                        }),\n                    ]);\n                    player.src = url;\n                } else {\n                    notify({\n                        message: `${t('VIDEO_EXT_ERR')}: ${file.type || ext}`,\n                        level: 'error',\n                    });\n                }\n            }\n        },\n        [newSub, notify, player, setSubtitle, waveform, clearSubs, decodeAudioData],\n    );\n\n    const onSubtitleChange = useCallback(\n        (event) => {\n            const file = event.target.files[0];\n            if (file) {\n                const ext = getExt(file.name);\n                if (['ass', 'vtt', 'srt', 'json'].includes(ext)) {\n                    file2sub(file)\n                        .then((res) => {\n                            clearSubs();\n                            setSubtitle(res);\n                        })\n                        .catch((err) => {\n                            notify({\n                                message: err.message,\n                                level: 'error',\n                            });\n                        });\n                } else {\n                    notify({\n                        message: `${t('SUB_EXT_ERR')}: ${ext}`,\n                        level: 'error',\n                    });\n                }\n            }\n        },\n        [notify, setSubtitle, clearSubs],\n    );\n\n    const onInputClick = useCallback((event) => {\n        event.target.value = '';\n    }, []);\n\n    const downloadSub = useCallback(\n        (type) => {\n            let text = '';\n            const name = `${Date.now()}.${type}`;\n            switch (type) {\n                case 'vtt':\n                    text = sub2vtt(subtitle);\n                    break;\n                case 'srt':\n                    text = sub2srt(subtitle);\n                    break;\n                case 'ass':\n                    text = sub2ass(subtitle);\n                    break;\n                case 'txt':\n                    text = sub2txt(subtitle);\n                    break;\n                case 'json':\n                    text = JSON.stringify(subtitle);\n                    break;\n                default:\n                    break;\n            }\n            const url = URL.createObjectURL(new Blob([text]));\n            download(url, name);\n        },\n        [subtitle],\n    );\n\n    const onTranslate = useCallback(() => {\n        \n        setLoading(t('TRANSLATING'));\n        googleTranslate(formatSub(subtitle), translate)\n            .then((res) => {\n                setLoading('');\n                setSubtitle(formatSub(res));\n                notify({\n                    message: t('TRANSLAT_SUCCESS'),\n                    level: 'success',\n                });\n            })\n            .catch((err) => {\n                setLoading('');\n                notify({\n                    message: err.message,\n                    level: 'error',\n                });\n            });\n    }, [subtitle, setLoading, formatSub, setSubtitle, translate, notify]);\n\n    return (\n        <Style className=\"tool\">\n            <div className=\"top\">\n                <div className=\"import\">\n               \n                    <div>\n                        <Translate value=\"OPEN_VIDEO\" />\n                        <input className=\"file\" type=\"file\" onChange={onVideoChange} onClick={onInputClick} />\n                    </div>\n                    <div className=\"btn\" onClick={Toggle}>\n                        <Translate value=\"OPEN_VIDEO_TWO\" />\n                       { /*<input className=\"file\" type=\"file\" onChange={onVideoChange} onClick={onInputClick} />*/}\n                      \n                    </div>\n                    <div className=\"btn\">\n                        <Translate value=\"OPEN_SUB\" />\n                        <input className=\"file\" type=\"file\" onChange={onSubtitleChange} onClick={onInputClick} />\n                    </div>\n                    \n                </div>\n                {window.crossOriginIsolated ? (\n                    <div className=\"burn\" onClick={burnSubtitles}>\n                        <div className=\"btn\">\n                            <Translate value=\"EXPORT_VIDEO\" />\n                        </div>\n                    </div>\n                ) : null}\n                <div className=\"export\">\n                    <div className=\"btn\" onClick={() => downloadSub('ass')}>\n                        <Translate value=\"EXPORT_ASS\" />\n                    </div>\n                    <div className=\"btn\" onClick={() => downloadSub('srt')}>\n                        <Translate value=\"EXPORT_SRT\" />\n                    </div>\n                    <div className=\"btn\" onClick={() => downloadSub('vtt')}>\n                        <Translate value=\"EXPORT_VTT\" />\n                    </div>\n                </div>\n                <div className=\"operate\">\n                    <div\n                        className=\"btn\"\n                        onClick={() => {\n                            if (window.confirm(t('CLEAR_TIP')) === true) {\n                                clearSubs();\n                                window.location.reload();\n                            }\n                        }}\n                    >\n                        <Translate value=\"CLEAR\" />\n                    </div>\n                    <div className=\"btn\" onClick={undoSubs}>\n                        <Translate value=\"UNDO\" />\n                    </div>\n                </div>\n                <div className=\"translate\">\n                    <select value={translate} onChange={(event) => setTranslate(event.target.value)}>\n                        {(languages[language] || languages.en).map((item) => (\n                            <option key={item.key} value={item.key}>\n                                {item.name}\n                            </option>\n                        ))}\n                    </select>\n                    <div className=\"btn\" onClick={onTranslate}>\n                        <Translate value=\"TRANSLATE\" />\n                    </div>\n                </div>\n                <div className=\"hotkey\">\n                    <span>\n                        <Translate value=\"HOTKEY_01\" />\n                    </span>\n                    <span>\n                        <Translate value=\"HOTKEY_02\" />\n                    </span>\n                </div>\n            </div>\n            <div className=\"bottom\">\n                {/* Removing Chinese advertisement on right */}\n               {/* <a href=\"https://online.aimu-app.com/\">\n                    <div className=\"title\"></div>\n                    <img src=\"/aimu.png\" alt=\"aimu\" />\n                </a>*/}\n            </div>\n        </Style>\n    );\n}\n","export default function srt2vtt(srt) {\n    return 'WEBVTT \\r\\n\\r\\n'.concat(\n        srt\n            .replace(/\\{\\\\([ibu])\\}/g, '</$1>')\n            .replace(/\\{\\\\([ibu])1\\}/g, '<$1>')\n            .replace(/\\{([ibu])\\}/g, '<$1>')\n            .replace(/\\{\\/([ibu])\\}/g, '</$1>')\n            .replace(/(\\d\\d:\\d\\d:\\d\\d),(\\d\\d\\d)/g, '$1.$2')\n            .replace(/{[\\s\\S]*?}/g, '')\n            .concat('\\r\\n\\r\\n'),\n    );\n}\n","import styled from 'styled-components';\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { Table } from 'react-virtualized';\nimport unescape from 'lodash/unescape';\nimport debounce from 'lodash/debounce';\n\nconst Style = styled.div`\n    position: relative;\n    box-shadow: 0px 5px 25px 5px rgb(0 0 0 / 80%);\n    background-color: rgb(0 0 0 / 100%);\n\n    .ReactVirtualized__Table {\n        .ReactVirtualized__Table__Grid {\n            outline: none;\n        }\n\n        .ReactVirtualized__Table__row {\n            .item {\n                height: 100%;\n                padding: 5px;\n\n                .textarea {\n                    border: none;\n                    width: 100%;\n                    height: 100%;\n                    color: #fff;\n                    font-size: 12px;\n                    padding: 10px;\n                    text-align: center;\n                    background-color: rgba(255, 255, 255, 0.05);\n                    border: 1px solid rgba(255, 255, 255, 0.1);\n                    transition: all 0.2s ease;\n                    resize: none;\n                    outline: none;\n\n                    &.highlight {\n                        background-color: rgb(0 87 158);\n                        border: 1px solid rgba(255, 255, 255, 0.3);\n                    }\n\n                    &.illegal {\n                        background-color: rgb(123 29 0);\n                        border: 1px solid rgba(255, 255, 255, 0.3);\n                    }\n                }\n            }\n        }\n    }\n`;\n\nexport default function Subtitles({ currentIndex, subtitle, checkSub, player, updateSub }) {\n    const [height, setHeight] = useState(100);\n\n    const resize = useCallback(() => {\n        setHeight(document.body.clientHeight - 170);\n    }, [setHeight]);\n\n    useEffect(() => {\n        resize();\n        if (!resize.init) {\n            resize.init = true;\n            const debounceResize = debounce(resize, 500);\n            window.addEventListener('resize', debounceResize);\n        }\n    }, [resize]);\n\n    return (\n        <Style className=\"subtitles\">\n            <Table\n                headerHeight={40}\n                width={250}\n                height={height}\n                rowHeight={80}\n                scrollToIndex={currentIndex}\n                rowCount={subtitle.length}\n                rowGetter={({ index }) => subtitle[index]}\n                headerRowRenderer={() => null}\n                rowRenderer={(props) => {\n                    return (\n                        <div\n                            key={props.key}\n                            className={props.className}\n                            style={props.style}\n                            onClick={() => {\n                                if (player) {\n                                    player.pause();\n                                    if (player.duration >= props.rowData.startTime) {\n                                        player.currentTime = props.rowData.startTime + 0.001;\n                                    }\n                                }\n                            }}\n                        >\n                            <div className=\"item\">\n                                <textarea\n                                    maxLength={200}\n                                    spellCheck={false}\n                                    className={[\n                                        'textarea',\n                                        currentIndex === props.index ? 'highlight' : '',\n                                        checkSub(props.rowData) ? 'illegal' : '',\n                                    ]\n                                        .join(' ')\n                                        .trim()}\n                                    value={unescape(props.rowData.text)}\n                                    onChange={(event) => {\n                                        updateSub(props.rowData, {\n                                            text: event.target.value,\n                                        });\n                                    }}\n                                />\n                            </div>\n                        </div>\n                    );\n                }}\n            ></Table>\n        </Style>\n    );\n}\n","import { isPlaying } from '../utils';\n\nfunction matrixCallback(callback) {\n    const result = [];\n    const x = 10;\n    const y = 5;\n    for (let xIndex = 0; xIndex < x; xIndex += 1) {\n        for (let yIndex = 0; yIndex < y; yIndex += 1) {\n            if (xIndex === 0 || xIndex === x - 1 || yIndex === 0 || yIndex === y - 1) {\n                result.push(callback(xIndex, yIndex, x, y));\n            }\n        }\n    }\n    return result;\n}\n\nfunction getColors($canvas, $video, width, height) {\n    const ctx = $canvas.getContext('2d');\n    $canvas.width = width;\n    $canvas.height = height;\n    ctx.drawImage($video, 0, 0);\n    return matrixCallback((xIndex, yIndex, x, y) => {\n        const itemW = width / x;\n        const itemH = height / y;\n        const itemX = xIndex * itemW;\n        const itemY = yIndex * itemH;\n        if (itemW < 1 || itemH < 1) return { r: 0, g: 0, b: 0 };\n        const { data } = ctx.getImageData(itemX, itemY, itemW, itemH);\n        let r = 0;\n        let g = 0;\n        let b = 0;\n        for (let i = 0, l = data.length; i < l; i += 4) {\n            r += data[i];\n            g += data[i + 1];\n            b += data[i + 2];\n        }\n        r = Math.floor(r / (data.length / 4));\n        g = Math.floor(g / (data.length / 4));\n        b = Math.floor(b / (data.length / 4));\n        return { r, g, b };\n    });\n}\n\nfunction creatMatrix(parent) {\n    return matrixCallback((xIndex, yIndex, x, y) => {\n        const $box = document.createElement('div');\n        $box.style.position = 'absolute';\n        $box.style.left = `${(xIndex * 100) / x}%`;\n        $box.style.top = `${(yIndex * 100) / y}%`;\n        $box.style.width = `${100 / x}%`;\n        $box.style.height = `${100 / y}%`;\n        $box.style.borderRadius = '50%';\n        $box.style.transition = 'all .2s ease';\n        parent.appendChild($box);\n        return {\n            $box,\n            left: xIndex === 0,\n            right: xIndex === x - 1,\n            top: yIndex === 0,\n            bottom: yIndex === y - 1,\n        };\n    });\n}\n\nfunction setStyle(element, key, value) {\n    element.style[key] = value;\n    return element;\n}\n\nfunction setStyles(element, styles) {\n    Object.keys(styles).forEach((key) => {\n        setStyle(element, key, styles[key]);\n    });\n    return element;\n}\n\nexport default function backlight($player, $video) {\n    const $backlight = document.createElement('div');\n    $backlight.classList.add('backlight');\n    setStyles($backlight, {\n        position: 'absolute',\n        zIndex: 9,\n        left: 0,\n        top: 0,\n        right: 0,\n        bottom: 0,\n        width: '100%',\n        height: '100%',\n    });\n\n    const matrix = creatMatrix($backlight);\n    const $canvas = document.createElement('canvas');\n    $player.insertBefore($backlight, $video);\n\n    function run() {\n        const { clientWidth, clientHeight } = $video;\n        const colors = getColors($canvas, $video, clientWidth, clientHeight);\n        colors.forEach(({ r, g, b }, index) => {\n            const { $box, left, right, top, bottom } = matrix[index];\n            const x = left ? '-64px' : right ? '64px' : '0';\n            const y = top ? '-64px' : bottom ? '64px' : '0';\n            $box.style.boxShadow = `rgb(${r}, ${g}, ${b}) ${x} ${y} 128px`;\n        });\n    }\n\n    $video.addEventListener('seeked', run);\n    $video.addEventListener('loadedmetadata', () => setTimeout(run, 1000));\n\n    (function loop() {\n        window.requestAnimationFrame(() => {\n            if (isPlaying($video)) {\n                run();\n            }\n            loop();\n        });\n    })();\n}\n","import React from 'react';\r\n\r\nclass PostRequestErrorHandling extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            postId: null,\r\n            errorMessage: null\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        // POST request using fetch with error handling\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ title: 'React POST Request Example' })\r\n        };\r\n        fetch('https://youtube-dl-utils-api.herokuapp.com/get_youtube_video_link_with_captions?url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DTn6-PIqc4UM&lang=en', requestOptions)\r\n            .then(async response => {\r\n                const isJson = response.headers.get('content-type')?.includes('application/json');\r\n                const data = isJson && await response.json();\r\n                console.log(data);\r\n                // check for error response\r\n                if (!response.ok) {\r\n                    // get error message from body or default to response status\r\n                    const error = (data && data.message) || response.status;\r\n                    return Promise.reject(error);\r\n                }\r\n\r\n                this.setState({ postId: data.id })\r\n            })\r\n            .catch(error => {\r\n                this.setState({ errorMessage: error });\r\n                console.error('There was an error!', error);\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const { errorMessage } = this.state;\r\n        return (\r\n            <div className=\"card text-center m-3\">\r\n                <h5 className=\"card-header\">POST Request with Error Handling</h5>\r\n                <div className=\"card-body\">\r\n                    Error: {errorMessage}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport { PostRequestErrorHandling }; ","import React, { useState, useEffect, createRef, useCallback, useMemo, memo } from 'react';\nimport TextareaAutosize from 'react-textarea-autosize';\nimport { Translate } from 'react-i18nify';\nimport styled from 'styled-components';\nimport backlight from '../libs/backlight';\nimport { isPlaying } from '../utils';\nimport { PostRequestErrorHandling } from './postRequestErrorHandling';\n\nconst Style = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    width: 100%;\n    padding: 20% 10%;\n\n    .video {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: auto;\n        width: auto;\n        position: relative;\n\n        video {\n            position: relative;\n            z-index: 10;\n            outline: none;\n            max-height: 100%;\n            max-width: 100%;\n            box-shadow: 0px 5px 25px 5px rgb(0 0 0 / 80%);\n            background-color: #000;\n            cursor: pointer;\n        }\n\n        .subtitle {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            position: absolute;\n            z-index: 20;\n            left: 0;\n            right: 0;\n            bottom: 5%;\n            width: 100%;\n            padding: 0 20px;\n            user-select: none;\n            pointer-events: none;\n\n            .operate {\n                padding: 5px 15px;\n                color: #fff;\n                font-size: 13px;\n                border-radius: 3px;\n                margin-bottom: 5px;\n                background-color: rgb(0 0 0 / 75%);\n                border: 1px solid rgb(255 255 255 / 20%);\n                cursor: pointer;\n                pointer-events: all;\n            }\n\n            .textarea {\n                width: 100%;\n                outline: none;\n                resize: none;\n                text-align: center;\n                line-height: 1.2;\n                border: none;\n                color: #fff;\n                font-size: 20px;\n                padding: 5px 10px;\n                user-select: all;\n                pointer-events: all;\n                background-color: rgb(0 0 0 / 0);\n                text-shadow: rgb(0 0 0) 1px 0px 1px, rgb(0 0 0) 0px 1px 1px, rgb(0 0 0) -1px 0px 1px,\n                    rgb(0 0 0) 0px -1px 1px;\n\n                &.pause {\n                    background-color: rgb(0 0 0 / 50%);\n                }\n            }\n        }\n    }\n`;\n\nconst VideoWrap = memo(\n    ({ setPlayer, setCurrentTime, setPlaying }) => {\n        const $video = createRef();\n\n        useEffect(() => {\n            setPlayer($video.current);\n            (function loop() {\n                window.requestAnimationFrame(() => {\n                    if ($video.current) {\n                        setPlaying(isPlaying($video.current));\n                        setCurrentTime($video.current.currentTime || 0);\n                    }\n                    loop();\n                });\n            })();\n        }, [setPlayer, setCurrentTime, setPlaying, $video]);\n\n        const onClick = useCallback(() => {\n            if ($video.current) {\n                if (isPlaying($video.current)) {\n                    $video.current.pause();\n                } else {\n                    $video.current.play();\n                }\n            }\n        }, [$video]);\n\n        return <video onClick={onClick} src=\"alt_video.mp4?t=1\" ref={$video} />;\n    },\n    () => true,\n);\n\nexport default function Player(props) {\n    const [currentSub, setCurrentSub] = useState(null);\n    const [focusing, setFocusing] = useState(false);\n    const [inputItemCursor, setInputItemCursor] = useState(0);\n    const $player = createRef();\n\n    useEffect(() => {\n        if ($player.current && props.player && !backlight.state) {\n            backlight.state = true;\n            backlight($player.current, props.player);\n        }\n    }, [$player, props.player]);\n\n    useMemo(() => {\n        setCurrentSub(props.subtitle[props.currentIndex]);\n    }, [props.subtitle, props.currentIndex]);\n\n    const onChange = useCallback(\n        (event) => {\n            props.player.pause();\n            props.updateSub(currentSub, { text: event.target.value });\n            if (event.target.selectionStart) {\n                setInputItemCursor(event.target.selectionStart);\n            }\n        },\n        [props, currentSub],\n    );\n\n    const onClick = useCallback(\n        (event) => {\n            props.player.pause();\n            if (event.target.selectionStart) {\n                setInputItemCursor(event.target.selectionStart);\n            }\n        },\n        [props],\n    );\n\n    const onFocus = useCallback((event) => {\n        setFocusing(true);\n        if (event.target.selectionStart) {\n            setInputItemCursor(event.target.selectionStart);\n        }\n    }, []);\n\n    const onBlur = useCallback(() => {\n        setTimeout(() => setFocusing(false), 500);\n    }, []);\n\n    const onSplit = useCallback(() => {\n        props.splitSub(currentSub, inputItemCursor);\n    }, [props, currentSub, inputItemCursor]);\n\n    return (\n        <Style className=\"player\">\n            <PostRequestErrorHandling />\n            <div className=\"video\" ref={$player}>\n\n                <VideoWrap {...props} />\n                {props.player && currentSub ? (\n                    <div className=\"subtitle\">\n                        {focusing ? (\n                            <div className=\"operate\" onClick={onSplit}>\n                                <Translate value=\"SPLIT\" />\n                            </div>\n                        ) : null}\n                        <TextareaAutosize\n                            className={`textarea ${!props.playing ? 'pause' : ''}`}\n                            value={currentSub.text}\n                            onChange={onChange}\n                            onClick={onClick}\n                            onFocus={onFocus}\n                            onBlur={onBlur}\n                            onKeyDown={onFocus}\n                            spellCheck={false}\n                        />\n                    </div>\n                ) : null}\n            </div>\n        </Style>\n    );\n}\n","import { ContextMenu, MenuItem, ContextMenuTrigger } from 'react-contextmenu';\nimport React, { useEffect, useCallback } from 'react';\nimport { Translate } from 'react-i18nify';\nimport styled from 'styled-components';\nimport isEqual from 'lodash/isEqual';\nimport DT from 'duration-time-conversion';\nimport { getKeyCode } from '../utils';\n\nconst Timeline = styled.div`\n    position: absolute;\n    z-index: 9;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n\n    .react-contextmenu-wrapper {\n        position: absolute;\n        z-index: 9;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        pointer-events: all;\n    }\n\n    .sub-item {\n        position: absolute;\n        top: 30%;\n        left: 0;\n        height: 40%;\n        overflow: hidden;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        text-align: center;\n        color: #fff;\n        font-size: 14px;\n        cursor: move;\n        user-select: none;\n        pointer-events: all;\n        background-color: rgba(255, 255, 255, 0.2);\n        border: 1px solid rgba(255, 255, 255, 0.2);\n\n        &:hover {\n            background-color: rgba(255, 255, 255, 0.3);\n        }\n\n        &.sub-highlight {\n            background-color: rgba(33, 150, 243, 0.5);\n            border: 1px solid rgba(33, 150, 243, 0.5);\n        }\n\n        &.sub-illegal {\n            background-color: rgba(199, 81, 35, 0.5);\n        }\n\n        .sub-handle {\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            z-index: 1;\n            height: 100%;\n            cursor: col-resize;\n            user-select: none;\n            &:hover {\n                background-color: rgba(255, 255, 255, 0.1);\n            }\n        }\n\n        .sub-text {\n            position: relative;\n            z-index: 0;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            flex-direction: column;\n            word-break: break-all;\n            white-space: nowrap;\n            text-shadow: rgb(0 0 0) 1px 0px 1px, rgb(0 0 0) 0px 1px 1px, rgb(0 0 0) -1px 0px 1px,\n                rgb(0 0 0) 0px -1px 1px;\n            width: 100%;\n            height: 100%;\n\n            p {\n                margin: 2px 0;\n                line-height: 1;\n\n                &.bilingual {\n                    transform: scale(0.8);\n                }\n            }\n        }\n\n        .sub-duration {\n            opacity: 0.5;\n            position: absolute;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            width: 100%;\n            text-align: center;\n            font-size: 12px;\n        }\n    }\n`;\n\nfunction getCurrentSubs(subs, beginTime, duration) {\n    return subs.filter((item) => {\n        return (\n            (item.startTime >= beginTime && item.startTime <= beginTime + duration) ||\n            (item.endTime >= beginTime && item.endTime <= beginTime + duration) ||\n            (item.startTime < beginTime && item.endTime > beginTime + duration)\n        );\n    });\n}\n\nfunction magnetically(time, closeTime) {\n    if (!closeTime) return time;\n    if (time > closeTime - 0.1 && closeTime + 0.1 > time) {\n        return closeTime;\n    }\n    return time;\n}\n\nlet lastTarget = null;\nlet lastSub = null;\nlet lastType = '';\nlet lastX = 0;\nlet lastIndex = -1;\nlet lastWidth = 0;\nlet lastDiffX = 0;\nlet isDroging = false;\n\nexport default React.memo(\n    function ({ player, subtitle, render, currentTime, checkSub, removeSub, hasSub, updateSub, mergeSub }) {\n        const $blockRef = React.createRef();\n        const $subsRef = React.createRef();\n        const currentSubs = getCurrentSubs(subtitle, render.beginTime, render.duration);\n        const gridGap = document.body.clientWidth / render.gridNum;\n        const currentIndex = currentSubs.findIndex(\n            (item) => item.startTime <= currentTime && item.endTime > currentTime,\n        );\n\n        const onMouseDown = (sub, event, type) => {\n            lastSub = sub;\n            if (event.button !== 0) return;\n            isDroging = true;\n            lastType = type;\n            lastX = event.pageX;\n            lastIndex = currentSubs.indexOf(sub);\n            lastTarget = $subsRef.current.children[lastIndex];\n            lastWidth = parseFloat(lastTarget.style.width);\n        };\n\n        const onDoubleClick = (sub, event) => {\n            const $subs = event.currentTarget;\n            const index = hasSub(sub);\n            const previou = subtitle[index - 1];\n            const next = subtitle[index + 1];\n            if (previou && next) {\n                const width = (next.startTime - previou.endTime) * 10 * gridGap;\n                $subs.style.width = `${width}px`;\n                const start = DT.d2t(previou.endTime);\n                const end = DT.d2t(next.startTime);\n                updateSub(sub, {\n                    start,\n                    end,\n                });\n            }\n        };\n\n        const onDocumentMouseMove = useCallback((event) => {\n            if (isDroging && lastTarget) {\n                lastDiffX = event.pageX - lastX;\n                if (lastType === 'left') {\n                    lastTarget.style.width = `${lastWidth - lastDiffX}px`;\n                    lastTarget.style.transform = `translate(${lastDiffX}px)`;\n                } else if (lastType === 'right') {\n                    lastTarget.style.width = `${lastWidth + lastDiffX}px`;\n                } else {\n                    lastTarget.style.transform = `translate(${lastDiffX}px)`;\n                }\n            }\n        }, []);\n\n        const onDocumentMouseUp = useCallback(() => {\n            if (isDroging && lastTarget && lastDiffX) {\n                const timeDiff = lastDiffX / gridGap / 10;\n                const index = hasSub(lastSub);\n                const previou = subtitle[index - 1];\n                const next = subtitle[index + 1];\n\n                const startTime = magnetically(lastSub.startTime + timeDiff, previou ? previou.endTime : null);\n                const endTime = magnetically(lastSub.endTime + timeDiff, next ? next.startTime : null);\n                const width = (endTime - startTime) * 10 * gridGap;\n\n                if ((previou && endTime < previou.startTime) || (next && startTime > next.endTime)) {\n                    //\n                } else {\n                    if (lastType === 'left') {\n                        if (startTime >= 0 && lastSub.endTime - startTime >= 0.2) {\n                            const start = DT.d2t(startTime);\n                            updateSub(lastSub, { start });\n                        } else {\n                            lastTarget.style.width = `${width}px`;\n                        }\n                    } else if (lastType === 'right') {\n                        if (endTime >= 0 && endTime - lastSub.startTime >= 0.2) {\n                            const end = DT.d2t(endTime);\n                            updateSub(lastSub, { end });\n                        } else {\n                            lastTarget.style.width = `${width}px`;\n                        }\n                    } else {\n                        if (startTime > 0 && endTime > 0 && endTime - startTime >= 0.2) {\n                            const start = DT.d2t(startTime);\n                            const end = DT.d2t(endTime);\n                            updateSub(lastSub, {\n                                start,\n                                end,\n                            });\n                        } else {\n                            lastTarget.style.width = `${width}px`;\n                        }\n                    }\n                }\n\n                lastTarget.style.transform = `translate(0)`;\n            }\n\n            lastType = '';\n            lastX = 0;\n            lastWidth = 0;\n            lastDiffX = 0;\n            isDroging = false;\n        }, [gridGap, hasSub, subtitle, updateSub]);\n\n        const onKeyDown = useCallback(\n            (event) => {\n                const sub = currentSubs[lastIndex];\n                if (sub && lastTarget) {\n                    const keyCode = getKeyCode(event);\n                    switch (keyCode) {\n                        case 37:\n                            updateSub(sub, {\n                                start: DT.d2t(sub.startTime - 0.1),\n                                end: DT.d2t(sub.endTime - 0.1),\n                            });\n                            player.currentTime = sub.startTime - 0.1;\n                            break;\n                        case 39:\n                            updateSub(sub, {\n                                start: DT.d2t(sub.startTime + 0.1),\n                                end: DT.d2t(sub.endTime + 0.1),\n                            });\n                            player.currentTime = sub.startTime + 0.1;\n                            break;\n                        case 8:\n                        case 46:\n                            removeSub(sub);\n                            break;\n                        default:\n                            break;\n                    }\n                }\n            },\n            [currentSubs, player, removeSub, updateSub],\n        );\n\n        useEffect(() => {\n            document.addEventListener('mousemove', onDocumentMouseMove);\n            document.addEventListener('mouseup', onDocumentMouseUp);\n            window.addEventListener('keydown', onKeyDown);\n            return () => {\n                document.removeEventListener('mousemove', onDocumentMouseMove);\n                document.removeEventListener('mouseup', onDocumentMouseUp);\n                window.removeEventListener('keydown', onKeyDown);\n            };\n        }, [onDocumentMouseMove, onDocumentMouseUp, onKeyDown]);\n\n        return (\n            <Timeline ref={$blockRef}>\n                <div ref={$subsRef}>\n                    {currentSubs.map((sub, key) => {\n                        return (\n                            <div\n                                className={[\n                                    'sub-item',\n                                    key === currentIndex ? 'sub-highlight' : '',\n                                    checkSub(sub) ? 'sub-illegal' : '',\n                                ]\n                                    .join(' ')\n                                    .trim()}\n                                key={key}\n                                style={{\n                                    left: render.padding * gridGap + (sub.startTime - render.beginTime) * gridGap * 10,\n                                    width: (sub.endTime - sub.startTime) * gridGap * 10,\n                                }}\n                                onClick={() => {\n                                    if (player.duration >= sub.startTime) {\n                                        player.currentTime = sub.startTime + 0.001;\n                                    }\n                                }}\n                                onDoubleClick={(event) => onDoubleClick(sub, event)}\n                            >\n                                <ContextMenuTrigger id=\"contextmenu\" holdToDisplay={-1}>\n                                    <div\n                                        className=\"sub-handle\"\n                                        style={{\n                                            left: 0,\n                                            width: 10,\n                                        }}\n                                        onMouseDown={(event) => onMouseDown(sub, event, 'left')}\n                                    ></div>\n\n                                    <div\n                                        className=\"sub-text\"\n                                        title={sub.text}\n                                        onMouseDown={(event) => onMouseDown(sub, event)}\n                                    >\n                                        {`${sub.text}`.split(/\\r?\\n/).map((line, index) => (\n                                            <p key={index}>{line}</p>\n                                        ))}\n                                    </div>\n\n                                    <div\n                                        className=\"sub-handle\"\n                                        style={{\n                                            right: 0,\n                                            width: 10,\n                                        }}\n                                        onMouseDown={(event) => onMouseDown(sub, event, 'right')}\n                                    ></div>\n                                    <div className=\"sub-duration\">{sub.duration}</div>\n                                </ContextMenuTrigger>\n                            </div>\n                        );\n                    })}\n                </div>\n                <ContextMenu id=\"contextmenu\">\n                    <MenuItem onClick={() => removeSub(lastSub)}>\n                        <Translate value=\"DELETE\" />\n                    </MenuItem>\n                    <MenuItem onClick={() => mergeSub(lastSub)}>\n                        <Translate value=\"MERGE\" />\n                    </MenuItem>\n                </ContextMenu>\n            </Timeline>\n        );\n    },\n    (prevProps, nextProps) => {\n        return (\n            isEqual(prevProps.subtitle, nextProps.subtitle) &&\n            isEqual(prevProps.render, nextProps.render) &&\n            prevProps.currentTime === nextProps.currentTime\n        );\n    },\n);\n","import React, { useEffect, useCallback, useState } from 'react';\nimport styled from 'styled-components';\nimport DT from 'duration-time-conversion';\nimport { t } from 'react-i18nify';\n\nconst Metronome = styled.div`\n    position: absolute;\n    z-index: 8;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    cursor: ew-resize;\n    user-select: none;\n\n    .template {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        height: 100%;\n        background-color: rgba(76, 175, 80, 0.5);\n        border-left: 1px solid rgba(76, 175, 80, 0.8);\n        border-right: 1px solid rgba(76, 175, 80, 0.8);\n        user-select: none;\n        pointer-events: none;\n    }\n`;\n\nfunction findIndex(subs, startTime) {\n    return subs.findIndex((item, index) => {\n        return (\n            (startTime >= item.endTime && !subs[index + 1]) ||\n            (item.startTime <= startTime && item.endTime > startTime) ||\n            (startTime >= item.endTime && subs[index + 1] && startTime < subs[index + 1].startTime)\n        );\n    });\n}\n\nexport default function Component({ render, subtitle, newSub, addSub, player, playing }) {\n    const [isDroging, setIsDroging] = useState(false);\n    const [drogStartTime, setDrogStartTime] = useState(0);\n    const [drogEndTime, setDrogEndTime] = useState(0);\n    const gridGap = document.body.clientWidth / render.gridNum;\n\n    const getEventTime = useCallback(\n        (event) => {\n            return (event.pageX - render.padding * gridGap) / gridGap / 10 + render.beginTime;\n        },\n        [gridGap, render],\n    );\n\n    const onMouseDown = useCallback(\n        (event) => {\n            if (event.button !== 0) return;\n            const clickTime = getEventTime(event);\n            setIsDroging(true);\n            setDrogStartTime(clickTime);\n        },\n        [getEventTime],\n    );\n\n    const onMouseMove = useCallback(\n        (event) => {\n            if (isDroging) {\n                if (playing) player.pause();\n                setDrogEndTime(getEventTime(event));\n            }\n        },\n        [isDroging, playing, player, getEventTime],\n    );\n\n    const onDocumentMouseUp = useCallback(() => {\n        if (isDroging) {\n            if (drogStartTime > 0 && drogEndTime > 0 && drogEndTime - drogStartTime >= 0.2) {\n                const index = findIndex(subtitle, drogStartTime) + 1;\n                const start = DT.d2t(drogStartTime);\n                const end = DT.d2t(drogEndTime);\n                addSub(\n                    index,\n                    newSub({\n                        start,\n                        end,\n                        text: t('SUB_TEXT'),\n                    }),\n                );\n            }\n        }\n        setIsDroging(false);\n        setDrogStartTime(0);\n        setDrogEndTime(0);\n    }, [isDroging, drogStartTime, drogEndTime, subtitle, addSub, newSub]);\n\n    useEffect(() => {\n        document.addEventListener('mouseup', onDocumentMouseUp);\n        return () => document.removeEventListener('mouseup', onDocumentMouseUp);\n    }, [onDocumentMouseUp]);\n\n    return (\n        <Metronome onMouseDown={onMouseDown} onMouseMove={onMouseMove}>\n            {player && !playing && drogStartTime && drogEndTime && drogEndTime > drogStartTime ? (\n                <div\n                    className=\"template\"\n                    style={{\n                        left: render.padding * gridGap + (drogStartTime - render.beginTime) * gridGap * 10,\n                        width: (drogEndTime - drogStartTime) * gridGap * 10,\n                    }}\n                ></div>\n            ) : null}\n        </Metronome>\n    );\n}\n","import styled from 'styled-components';\nimport DT from 'duration-time-conversion';\nimport React, { useState, useEffect, useCallback, createRef, memo } from 'react';\nimport WFPlayer from 'wfplayer';\nimport clamp from 'lodash/clamp';\nimport throttle from 'lodash/throttle';\nimport Timeline from './Timeline';\nimport Metronome from './Metronome';\n\nconst Style = styled.div`\n    position: relative;\n    display: flex;\n    flex-direction: column;\n\n    .progress {\n        position: absolute;\n        left: 0;\n        right: 0;\n        top: -12px;\n        z-index: 11;\n        width: 100%;\n        height: 12px;\n        user-select: none;\n        border-top: 1px solid rgb(255 255 255 / 20%);\n        background-color: rgb(0 0 0 / 50%);\n\n        .bar {\n            position: absolute;\n            left: 0;\n            top: 0;\n            bottom: 0;\n            width: 0%;\n            height: 100%;\n            display: inline-block;\n            background-color: #730000;\n            overflow: hidden;\n\n            .handle {\n                position: absolute;\n                right: 0;\n                top: 0;\n                bottom: 0;\n                width: 10px;\n                cursor: ew-resize;\n                background-color: #ff9800;\n            }\n        }\n\n        .subtitle {\n            position: absolute;\n            left: 0;\n            top: 0;\n            bottom: 0;\n            right: 0;\n            width: 100%;\n            height: 100%;\n            pointer-events: none;\n\n            span {\n                position: absolute;\n                top: 0;\n                bottom: 0;\n                height: 100%;\n                background-color: rgb(255 255 255 / 20%);\n            }\n        }\n    }\n\n    .duration {\n        position: absolute;\n        left: 0;\n        right: 0;\n        top: -40px;\n        z-index: 12;\n        width: 100%;\n        font-size: 18px;\n        color: rgb(255 255 255 / 75%);\n        text-shadow: 0 1px 2px rgb(0 0 0 / 75%);\n        text-align: center;\n        user-select: none;\n        pointer-events: none;\n    }\n\n    .waveform {\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        z-index: 1;\n        width: 100%;\n        height: 100%;\n        z-index: 1;\n        user-select: none;\n        pointer-events: none;\n    }\n\n    .grab {\n        position: relative;\n        z-index: 11;\n        cursor: grab;\n        height: 20%;\n        user-select: none;\n        background-color: rgb(33 150 243 / 20%);\n        border-top: 1px solid rgb(33 150 243 / 30%);\n        border-bottom: 1px solid rgb(33 150 243 / 30%);\n\n        &.grabbing {\n            cursor: grabbing;\n        }\n    }\n`;\n\nconst Waveform = memo(\n    ({ player, setWaveform, setRender }) => {\n        const $waveform = createRef();\n\n        useEffect(() => {\n            [...WFPlayer.instances].forEach((item) => item.destroy());\n\n            const waveform = new WFPlayer({\n                scrollable: true,\n                useWorker: false,\n                duration: 10,\n                padding: 1,\n                wave: true,\n                pixelRatio: 2,\n                container: $waveform.current,\n                mediaElement: player,\n                backgroundColor: 'rgba(0, 0, 0, 0)',\n                waveColor: 'rgba(255, 255, 255, 0.2)',\n                progressColor: 'rgba(255, 255, 255, 0.5)',\n                gridColor: 'rgba(255, 255, 255, 0.05)',\n                rulerColor: 'rgba(255, 255, 255, 0.5)',\n                paddingColor: 'rgba(0, 0, 0, 0)',\n            });\n\n            setWaveform(waveform);\n            waveform.on('update', setRender);\n            waveform.load('/sample.mp3');\n        }, [player, $waveform, setWaveform, setRender]);\n\n        return <div className=\"waveform\" ref={$waveform} />;\n    },\n    () => true,\n);\n\nconst Grab = (props) => {\n    const [grabStartX, setGrabStartX] = useState(0);\n    const [grabStartTime, setGrabStartTime] = useState(0);\n    const [grabbing, setGrabbing] = useState(false);\n\n    const onGrabDown = useCallback(\n        (event) => {\n            if (event.button !== 0) return;\n            setGrabStartX(event.pageX);\n            setGrabStartTime(props.player.currentTime);\n            setGrabbing(true);\n        },\n        [props.player],\n    );\n\n    const onGrabUp = () => {\n        setGrabStartX(0);\n        setGrabStartTime(0);\n        setGrabbing(false);\n    };\n\n    const onGrabMove = useCallback(\n        (event) => {\n            if (grabbing && props.player && props.waveform) {\n                const currentTime = clamp(\n                    grabStartTime - ((event.pageX - grabStartX) / document.body.clientWidth) * 10,\n                    0,\n                    props.player.duration,\n                );\n                props.player.currentTime = currentTime;\n                props.waveform.seek(currentTime);\n            }\n        },\n        [grabbing, props.player, props.waveform, grabStartX, grabStartTime],\n    );\n\n    useEffect(() => {\n        document.addEventListener('mouseup', onGrabUp);\n        return () => document.removeEventListener('mouseup', onGrabUp);\n    }, []);\n\n    return (\n        <div className={`grab ${grabbing ? 'grabbing' : ''}`} onMouseDown={onGrabDown} onMouseMove={onGrabMove}></div>\n    );\n};\n\nconst Progress = (props) => {\n    const [grabbing, setGrabbing] = useState(false);\n\n    const onProgressClick = useCallback(\n        (event) => {\n            if (event.button !== 0) return;\n            const currentTime = (event.pageX / document.body.clientWidth) * props.player.duration;\n            props.player.currentTime = currentTime;\n            props.waveform.seek(currentTime);\n        },\n        [props],\n    );\n\n    const onGrabDown = useCallback(\n        (event) => {\n            if (event.button !== 0) return;\n            setGrabbing(true);\n        },\n        [setGrabbing],\n    );\n\n    const onGrabMove = useCallback(\n        (event) => {\n            if (grabbing) {\n                const currentTime = (event.pageX / document.body.clientWidth) * props.player.duration;\n                props.player.currentTime = currentTime;\n            }\n        },\n        [grabbing, props.player],\n    );\n\n    const onDocumentMouseUp = useCallback(() => {\n        if (grabbing) {\n            setGrabbing(false);\n            props.waveform.seek(props.player.currentTime);\n        }\n    }, [grabbing, props.waveform, props.player.currentTime]);\n\n    useEffect(() => {\n        document.addEventListener('mouseup', onDocumentMouseUp);\n        document.addEventListener('mousemove', onGrabMove);\n        return () => {\n            document.removeEventListener('mouseup', onDocumentMouseUp);\n            document.removeEventListener('mousemove', onGrabMove);\n        };\n    }, [onDocumentMouseUp, onGrabMove]);\n\n    return (\n        <div className=\"progress\" onClick={onProgressClick}>\n            <div className=\"bar\" style={{ width: `${(props.currentTime / props.player.duration) * 100}%` }}>\n                <div className=\"handle\" onMouseDown={onGrabDown}></div>\n            </div>\n            <div className=\"subtitle\">\n                {props.subtitle.length <= 200\n                    ? props.subtitle.map((item, index) => {\n                          const { duration } = props.player;\n                          return (\n                              <span\n                                  key={index}\n                                  className=\"item\"\n                                  style={{\n                                      left: `${(item.startTime / duration) * 100}%`,\n                                      width: `${(item.duration / duration) * 100}%`,\n                                  }}\n                              ></span>\n                          );\n                      })\n                    : null}\n            </div>\n        </div>\n    );\n};\n\nconst Duration = (props) => {\n    const getDuration = useCallback((time) => {\n        time = time === Infinity ? 0 : time;\n        return DT.d2t(time).split('.')[0];\n    }, []);\n\n    return (\n        <div className=\"duration\">\n            <span>\n                {getDuration(props.currentTime)} / {getDuration(props.player.duration || 0)}\n            </span>\n        </div>\n    );\n};\n\nexport default function Footer(props) {\n    const $footer = createRef();\n    const [render, setRender] = useState({\n        padding: 2,\n        duration: 10,\n        gridGap: 10,\n        gridNum: 110,\n        beginTime: -5,\n    });\n\n    const onWheel = useCallback(\n        (event) => {\n            if (\n                !props.player ||\n                !props.waveform ||\n                props.player.playing ||\n                !$footer.current ||\n                !$footer.current.contains(event.target)\n            ) {\n                return;\n            }\n\n            const deltaY = Math.sign(event.deltaY) / 5;\n            const currentTime = clamp(props.player.currentTime + deltaY, 0, props.player.duration);\n            props.player.currentTime = currentTime;\n            props.waveform.seek(currentTime);\n        },\n        [props.waveform, props.player, $footer],\n    );\n\n    useEffect(() => {\n        const onWheelThrottle = throttle(onWheel, 100);\n        window.addEventListener('wheel', onWheelThrottle);\n        return () => window.removeEventListener('wheel', onWheelThrottle);\n    }, [onWheel]);\n\n    return (\n        <Style className=\"footer\" ref={$footer}>\n            {props.player ? (\n                <React.Fragment>\n                    <Progress {...props} />\n                    <Duration {...props} />\n                    <Waveform {...props} setRender={setRender} />\n                    <Grab {...props} render={render} />\n                    <Metronome {...props} render={render} />\n                    <Timeline {...props} render={render} />\n                </React.Fragment>\n            ) : null}\n        </Style>\n    );\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { t } from 'react-i18nify';\n\nconst Loading = styled.div`\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    -webkit-backdrop-filter: saturate(180%) blur(2px);\n    backdrop-filter: saturate(180%) blur(2px);\n    background-color: rgba(0, 0, 0, 0.5);\n\n    .loading-inner {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        flex-direction: column;\n        width: 200px;\n        height: 200px;\n        padding: 0 10px;\n        border-radius: 10px;\n        color: #fff;\n        background-color: rgb(34 36 60 / 95%);\n        box-shadow: 0 0 3px 0 rgba(0, 0, 0, 0.5);\n\n        img {\n            zoom: 0.5;\n            margin-bottom: 10px;\n        }\n    }\n`;\n\nexport default function Component({ loading }) {\n    return (\n        <Loading>\n            <div className=\"loading-inner\">\n                <img src=\"/loading.svg\" alt=\"loading\" />\n                <div>{loading || t('LOADING')}</div>\n            </div>\n        </Loading>\n    );\n}\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst Style = styled.div`\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    z-index: 999;\n    width: 100%;\n    height: 3px;\n    user-select: none;\n    pointer-events: none;\n\n    .inner {\n        position: relative;\n        height: 100%;\n        background-color: #f00;\n        transition: all 0.3s ease 0s;\n        span {\n            position: absolute;\n            top: 3px;\n            right: 0;\n            padding: 2px 5px;\n            color: #fff;\n            font-size: 12px;\n            background-color: rgb(0 0 0 / 80%);\n        }\n    }\n`;\n\nexport default function Component({ processing }) {\n    return (\n        <Style>\n            <div className=\"inner\" style={{ width: `${processing}%` }}>\n                <span>{`${processing.toFixed(2)}%`}</span>\n            </div>\n        </Style>\n    );\n}\n","import React, { useState, useEffect, useCallback, useMemo, useRef } from 'react';\nimport NotificationSystem from 'react-notification-system';\nimport DT from 'duration-time-conversion';\nimport isEqual from 'lodash/isEqual';\nimport styled from 'styled-components';\nimport Tool from './components/Tool';\nimport Subtitles from './components/Subtitles';\nimport Player from './components/Player';\nimport Footer from './components/Footer';\nimport Loading from './components/Loading';\nimport ProgressBar from './components/ProgressBar';\nimport { getKeyCode } from './utils';\nimport Sub from './libs/Sub';\n\nconst Style = styled.div`\n    height: 100%;\n    width: 100%;\n\n    .main {\n        display: flex;\n        height: calc(100% - 200px);\n\n        .player {\n            flex: 1;\n        }\n\n        .subtitles {\n            width: 250px;\n        }\n\n        .tool {\n            width: 300px;\n        }\n    }\n\n    .footer {\n        height: 200px;\n    }\n`;\n\nexport default function App({ defaultLang }) {\n    const subtitleHistory = useRef([]);\n    const notificationSystem = useRef(null);\n    const [player, setPlayer] = useState(null);\n    const [loading, setLoading] = useState('');\n    const [processing, setProcessing] = useState(0);\n    const [language, setLanguage] = useState(defaultLang);\n    const [subtitle, setSubtitleOriginal] = useState([]);\n    const [waveform, setWaveform] = useState(null);\n    const [playing, setPlaying] = useState(false);\n    const [currentTime, setCurrentTime] = useState(0);\n    const [currentIndex, setCurrentIndex] = useState(-1);\n\n    const newSub = useCallback((item) => new Sub(item), []);\n    const hasSub = useCallback((sub) => subtitle.indexOf(sub), [subtitle]);\n\n    const formatSub = useCallback(\n        (sub) => {\n            if (Array.isArray(sub)) {\n                return sub.map((item) => newSub(item));\n            }\n            return newSub(sub);\n        },\n        [newSub],\n    );\n\n    const copySubs = useCallback(() => formatSub(subtitle), [subtitle, formatSub]);\n\n    const setSubtitle = useCallback(\n        (newSubtitle, saveToHistory = true) => {\n            if (!isEqual(newSubtitle, subtitle)) {\n                if (saveToHistory) {\n                    if (subtitleHistory.current.length >= 1000) {\n                        subtitleHistory.current.shift();\n                    }\n                    subtitleHistory.current.push(formatSub(subtitle));\n                }\n                window.localStorage.setItem('subtitle', JSON.stringify(newSubtitle));\n                setSubtitleOriginal(newSubtitle);\n            }\n        },\n        [subtitle, setSubtitleOriginal, formatSub],\n    );\n\n    const undoSubs = useCallback(() => {\n        const subs = subtitleHistory.current.pop();\n        if (subs) {\n            setSubtitle(subs, false);\n        }\n    }, [setSubtitle, subtitleHistory]);\n\n    const clearSubs = useCallback(() => {\n        setSubtitle([]);\n        subtitleHistory.current.length = 0;\n    }, [setSubtitle, subtitleHistory]);\n\n    const checkSub = useCallback(\n        (sub) => {\n            const index = hasSub(sub);\n            if (index < 0) return;\n            const previous = subtitle[index - 1];\n            return (previous && sub.startTime < previous.endTime) || !sub.check || sub.duration < 0.2;\n        },\n        [subtitle, hasSub],\n    );\n\n    const notify = useCallback(\n        (obj) => {\n            // https://github.com/igorprado/react-notification-system\n            const notification = notificationSystem.current;\n            notification.clearNotifications();\n            notification.addNotification({\n                position: 'tc',\n                dismissible: 'none',\n                autoDismiss: 2,\n                message: obj.message,\n                level: obj.level,\n            });\n        },\n        [notificationSystem],\n    );\n\n    const removeSub = useCallback(\n        (sub) => {\n            const index = hasSub(sub);\n            if (index < 0) return;\n            const subs = copySubs();\n            subs.splice(index, 1);\n            setSubtitle(subs);\n        },\n        [hasSub, copySubs, setSubtitle],\n    );\n\n    const addSub = useCallback(\n        (index, sub) => {\n            const subs = copySubs();\n            subs.splice(index, 0, formatSub(sub));\n            setSubtitle(subs);\n        },\n        [copySubs, setSubtitle, formatSub],\n    );\n\n    const updateSub = useCallback(\n        (sub, obj) => {\n            const index = hasSub(sub);\n            if (index < 0) return;\n            const subs = copySubs();\n            const subClone = formatSub(sub);\n            Object.assign(subClone, obj);\n            if (subClone.check) {\n                subs[index] = subClone;\n                setSubtitle(subs);\n            }\n        },\n        [hasSub, copySubs, setSubtitle, formatSub],\n    );\n\n    const mergeSub = useCallback(\n        (sub) => {\n            const index = hasSub(sub);\n            if (index < 0) return;\n            const subs = copySubs();\n            const next = subs[index + 1];\n            if (!next) return;\n            const merge = newSub({\n                start: sub.start,\n                end: next.end,\n                text: sub.text.trim() + '\\n' + next.text.trim(),\n            });\n            subs[index] = merge;\n            subs.splice(index + 1, 1);\n            setSubtitle(subs);\n        },\n        [hasSub, copySubs, setSubtitle, newSub],\n    );\n\n    const splitSub = useCallback(\n        (sub, start) => {\n            const index = hasSub(sub);\n            if (index < 0 || !sub.text || !start) return;\n            const subs = copySubs();\n            const text1 = sub.text.slice(0, start).trim();\n            const text2 = sub.text.slice(start).trim();\n            if (!text1 || !text2) return;\n            const splitDuration = (sub.duration * (start / sub.text.length)).toFixed(3);\n            if (splitDuration < 0.2 || sub.duration - splitDuration < 0.2) return;\n            subs.splice(index, 1);\n            const middleTime = DT.d2t(sub.startTime + parseFloat(splitDuration));\n            subs.splice(\n                index,\n                0,\n                newSub({\n                    start: sub.start,\n                    end: middleTime,\n                    text: text1,\n                }),\n            );\n            subs.splice(\n                index + 1,\n                0,\n                newSub({\n                    start: middleTime,\n                    end: sub.end,\n                    text: text2,\n                }),\n            );\n            setSubtitle(subs);\n        },\n        [hasSub, copySubs, setSubtitle, newSub],\n    );\n\n    const onKeyDown = useCallback(\n        (event) => {\n            const keyCode = getKeyCode(event);\n            switch (keyCode) {\n                case 32:\n                    event.preventDefault();\n                    if (player) {\n                        if (playing) {\n                            player.pause();\n                        } else {\n                            player.play();\n                        }\n                    }\n                    break;\n                case 90:\n                    event.preventDefault();\n                    if (event.metaKey) {\n                        undoSubs();\n                    }\n                    break;\n                default:\n                    break;\n            }\n        },\n        [player, playing, undoSubs],\n    );\n\n    useEffect(() => {\n        window.addEventListener('keydown', onKeyDown);\n        return () => window.removeEventListener('keydown', onKeyDown);\n    }, [onKeyDown]);\n\n    useMemo(() => {\n        const currentIndex = subtitle.findIndex((item) => item.startTime <= currentTime && item.endTime > currentTime);\n        setCurrentIndex(currentIndex);\n    }, [currentTime, subtitle]);\n\n    useEffect(() => {\n        const localSubtitleString = window.localStorage.getItem('subtitle');\n        const fetchSubtitle = () =>\n            fetch('/sample_alt.json')\n                //.then((res) => res.json())\n                .then((res) => {\n                    setSubtitleOriginal(res.map((item) => new Sub(item)));\n                });\n\n        if (localSubtitleString) {\n            try {\n                const localSubtitle = JSON.parse(localSubtitleString);\n                if (localSubtitle.length) {\n                    setSubtitleOriginal(localSubtitle.map((item) => new Sub(item)));\n                } else {\n                    fetchSubtitle();\n                }\n            } catch (error) {\n                fetchSubtitle();\n            }\n        } else {\n            fetchSubtitle();\n        }\n    }, [setSubtitleOriginal]);\n\n    const props = {\n        player,\n        setPlayer,\n        subtitle,\n        setSubtitle,\n        waveform,\n        setWaveform,\n        currentTime,\n        setCurrentTime,\n        currentIndex,\n        setCurrentIndex,\n        playing,\n        setPlaying,\n        language,\n        setLanguage,\n        loading,\n        setLoading,\n        setProcessing,\n        subtitleHistory,\n\n        notify,\n        newSub,\n        hasSub,\n        checkSub,\n        removeSub,\n        addSub,\n        undoSubs,\n        clearSubs,\n        updateSub,\n        formatSub,\n        mergeSub,\n        splitSub,\n    };\n\n    return (\n        <Style>\n            <div className=\"main\">\n                <Player {...props} />\n                <Subtitles {...props} />\n                <Tool {...props} />\n            </div>\n            <Footer {...props} />\n            {loading ? <Loading loading={loading} /> : null}\n            {processing > 0 && processing < 100 ? <ProgressBar processing={processing} /> : null}\n            <NotificationSystem ref={notificationSystem} allowHTML={true} />\n        </Style>\n    );\n}\n","import styled from 'styled-components';\nimport { Translate } from 'react-i18nify';\n\nconst Style = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 100%;\n`;\n\nexport default function Mobile() {\n    return (\n        <Style>\n            <Translate value=\"MOBILE_TIP\" />\n        </Style>\n    );\n}\n","import { createGlobalStyle } from 'styled-components';\n\nexport default createGlobalStyle`\n    html,\n    body,\n    #root {\n        height: 100%;\n    }\n\n    body {\n        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;\n        line-height: 1.5;\n        overflow: hidden;\n    }\n\n    *, *::before, *::after {\n        box-sizing: border-box;\n    }\n\n    #root {\n        display: flex;\n        font-size: 14px;\n        color: #ccc;\n        background-color: rgb(0 0 0 / 90%);\n    }\n\n    ::-webkit-scrollbar {\n        width: 5px;\n    }\n\n    ::-webkit-scrollbar-thumb {\n        background-color: #999;\n    }\n\n    ::-webkit-scrollbar-thumb:hover {\n        background-color: #ccc;\n    }\n`;\n","import 'core-js';\nimport 'normalize.css';\nimport './libs/contextmenu.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { isMobile } from './utils';\nimport { setLocale, setTranslations } from 'react-i18nify';\nimport i18n from './i18n';\nimport App from './App';\nimport Mobile from './Mobile';\nimport GlobalStyle from './GlobalStyle';\n\nsetTranslations(i18n);\nconst language = navigator.language.toLowerCase();\nconst defaultLang = i18n[language] ? language : 'en';\nsetLocale(defaultLang);\n\nReactDOM.render(\n    <React.Fragment>\n        <GlobalStyle />\n        {isMobile ? <Mobile /> : <App defaultLang={defaultLang} />}\n    </React.Fragment>,\n    document.getElementById('root'),\n);\n"],"sourceRoot":""}