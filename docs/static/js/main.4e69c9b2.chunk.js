(this.webpackJsonpsubplayer=this.webpackJsonpsubplayer||[]).push([[0],{542:function(e,n,t){},689:function(e,n,t){"use strict";t.r(n);t(262),t(263),t(264),t(265),t(266),t(267),t(268),t(269),t(270),t(271),t(272),t(273),t(274),t(275),t(276),t(277),t(278),t(279),t(280),t(281),t(282),t(283),t(284),t(286),t(104),t(287),t(288),t(289),t(290),t(291),t(292),t(293),t(294),t(295),t(296),t(297),t(299),t(300),t(302),t(303),t(304),t(143),t(305),t(306),t(307),t(308),t(309),t(310),t(311),t(312),t(313),t(314),t(315),t(316),t(317),t(318),t(319),t(320),t(321),t(322),t(323),t(324),t(325),t(326),t(327),t(328),t(329),t(330),t(332),t(333),t(335),t(336),t(337),t(338),t(339),t(340),t(341),t(342),t(343),t(344),t(345),t(346),t(347),t(348),t(349),t(350),t(351),t(352),t(353),t(354),t(355),t(357),t(358),t(360),t(361),t(362),t(364),t(365),t(366),t(367),t(368),t(369),t(370),t(371),t(372),t(373),t(374),t(211),t(375),t(376),t(212),t(377),t(378),t(379),t(380),t(213),t(381),t(382),t(383),t(384),t(385),t(386),t(387),t(388),t(389),t(390),t(391),t(392),t(393),t(394),t(395),t(396),t(397),t(398),t(399),t(400),t(401),t(402),t(403),t(404),t(405),t(406),t(408),t(409),t(410),t(411),t(412),t(413),t(414),t(415),t(416),t(417),t(418),t(419),t(421),t(422),t(423),t(424),t(425),t(426),t(427),t(428),t(429),t(431),t(432),t(433),t(434),t(435),t(436),t(437),t(438),t(439),t(440),t(441),t(442),t(153),t(443),t(444),t(446),t(447),t(448),t(449),t(450),t(452),t(453),t(454),t(455),t(456),t(457),t(458),t(459),t(461),t(462),t(463),t(464),t(465),t(466),t(467),t(468),t(469),t(470),t(471),t(472),t(473),t(474),t(475),t(476),t(477),t(478),t(479),t(480),t(481),t(482),t(483),t(484),t(485),t(487),t(489),t(490),t(491),t(492),t(493),t(494),t(495),t(496),t(497),t(498),t(499),t(500),t(501),t(502),t(503),t(504),t(505),t(506),t(507),t(508),t(509),t(510),t(511),t(512),t(513),t(514),t(515),t(516),t(517),t(518),t(519),t(521),t(523),t(524),t(525),t(526),t(527),t(528),t(529),t(530),t(531),t(532),t(533),t(535),t(536),t(537),t(538),t(540),t(226),t(541),t(542);var a=t(1),r=t.n(a),i=t(169),o=t.n(i),s=window.navigator.userAgent,c=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(s);function l(e){return e.trim().toLowerCase().split(".").pop()}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(n){return setTimeout(n,e)}))}function d(e){var n=document.activeElement.tagName.toUpperCase(),t=document.activeElement.getAttribute("contenteditable");if("INPUT"!==n&&"TEXTAREA"!==n&&""!==t&&"true"!==t)return Number(e.keyCode)}function m(e){return!!(e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2)}var b=t(11),h={LOADING:"\u52a0\u8f7d\u4e2d...",SUB_TEXT:"\u5b57\u5e55\u6587\u672c",OPEN_VIDEO:"\u6253\u5f00\u89c6\u9891",OPEN_SUB:"\u6253\u5f00\u5b57\u5e55",EXPORT_ASS:"\u5bfc\u51fa ASS",EXPORT_SRT:"\u5bfc\u51fa SRT",EXPORT_VTT:"\u5bfc\u51fa VTT",TRANSLATE:"\u6279\u91cf\u7ffb\u8bd1",TRANSLATING:"\u7ffb\u8bd1\u4e2d...",TRANSLAT_SUCCESS:"\u7ffb\u8bd1\u6210\u529f",DECODE_START:"\u5f00\u59cb\u89e3\u7801\u97f3\u9891",DECODE_SUCCESS:"\u89e3\u7801\u97f3\u9891\u6210\u529f",DECODE_ERROR:"\u89e3\u7801\u97f3\u9891\u5931\u8d25",VIDEO_EXT_ERR:"\u65e0\u6cd5\u6253\u5f00\u8be5\u89c6\u9891\u683c\u5f0f",SUB_EXT_ERR:"\u65e0\u6cd5\u6253\u5f00\u8be5\u5b57\u5e55\u683c\u5f0f",MOBILE_TIP:"\u8bf7\u4f7f\u7528\u7535\u8111\u8bbf\u95ee",HOTKEY_01:"\u7a7a\u683c\u952e: \u64ad\u653e / \u6682\u505c",HOTKEY_02:"Ctrl + Z: \u64a4\u9500",CLEAR:"\u6e05\u7a7a",UNDO:"\u64a4\u9500",DELETE:"\u5220\u9664\u5b57\u5e55",MERGE:"\u5408\u5e76\u4e0b\u4e00\u4e2a",SPLIT:"\u62c6\u5206\u5b57\u5e55"},f={en:{LOADING:"Loading...",SUB_TEXT:"Subtitle Text",OPEN_VIDEO:"Open Video",OPEN_SUB:"Open Subtitle",EXPORT_ASS:"Export ASS",EXPORT_SRT:"Export SRT",EXPORT_VTT:"Export VTT",TRANSLATE:"Translation",TRANSLATING:"Translation...",TRANSLAT_SUCCESS:"Translation success",DECODE_START:"Start decoding audio",DECODE_SUCCESS:"Decoding audio success",DECODE_ERROR:"Decoding audio failed",VIDEO_EXT_ERR:"Unable to open this video format",SUB_EXT_ERR:"Unable to open this subtitle format",MOBILE_TIP:"Please use computer access",HOTKEY_01:"Space: Play / Pause",HOTKEY_02:"Ctrl + Z: Undo",CLEAR:"Clear",UNDO:"Undo",DELETE:"Delete Subtitle",MERGE:"Merge Next",SPLIT:"Split Subtitle"},zh:h,"zh-cn":h,"zh-tw":h},p=t(25),g=t(20),y=t(29),v=t(255),k=t.n(v),j=t(16),x=t.n(j),O=t(95),w=t.n(O),T=t(31),S=t(45),E=t.n(S),C=t(68),R=[{name:"\u7b80\u4f53\u4e2d\u6587",key:"zh"},{name:"\u7e41\u4f53\u4e2d\u6587",key:"zh-TW"},{name:"\u82f1\u8bed",key:"en"},{name:"\u5357\u975e\u8377\u5170\u8bed",key:"af"},{name:"\u963f\u5c14\u5df4\u5c3c\u4e9a\u8bed",key:"sq"},{name:"\u963f\u59c6\u54c8\u62c9\u8bed",key:"am"},{name:"\u963f\u62c9\u4f2f\u8bed",key:"ar"},{name:"\u4e9a\u7f8e\u5c3c\u4e9a\u8bed",key:"hy"},{name:"\u963f\u585e\u62dc\u7586\u8bed",key:"az"},{name:"\u5df4\u65af\u514b\u8bed",key:"eu"},{name:"\u767d\u4fc4\u7f57\u65af\u8bed",key:"be"},{name:"\u5b5f\u52a0\u62c9\u8bed",key:"bn"},{name:"\u6ce2\u65af\u5c3c\u4e9a\u8bed",key:"bs"},{name:"\u4fdd\u52a0\u5229\u4e9a\u8bed",key:"bg"},{name:"\u52a0\u6cf0\u7f57\u5c3c\u4e9a\u8bed",key:"ca"},{name:"\u5bbf\u52a1\u8bed",key:"ceb"},{name:"\u79d1\u897f\u5609\u8bed",key:"co"},{name:"\u514b\u7f57\u5730\u4e9a\u8bed",key:"hr"},{name:"\u6377\u514b\u8bed",key:"cs"},{name:"\u4e39\u9ea6\u8bed",key:"da"},{name:"\u8377\u5170\u8bed",key:"nl"},{name:"\u4e16\u754c\u8bed",key:"eo"},{name:"\u7231\u6c99\u5c3c\u4e9a\u8bed",key:"et"},{name:"\u82ac\u5170\u8bed",key:"fi"},{name:"\u6cd5\u8bed",key:"fr"},{name:"\u5f17\u91cc\u65af\u5170\u8bed",key:"fy"},{name:"\u52a0\u5229\u897f\u4e9a\u8bed",key:"gl"},{name:"\u683c\u9c81\u5409\u4e9a\u8bed",key:"ka"},{name:"\u5fb7\u8bed",key:"de"},{name:"\u5e0c\u814a\u8bed",key:"el"},{name:"\u53e4\u5409\u62c9\u7279\u8bed",key:"gu"},{name:"\u6d77\u5730\u514b\u91cc\u5965\u5c14\u8bed",key:"ht"},{name:"\u8c6a\u8428\u8bed",key:"ha"},{name:"\u590f\u5a01\u5937\u8bed",key:"haw"},{name:"\u5e0c\u4f2f\u6765\u8bed",key:"he"},{name:"\u5370\u5730\u8bed",key:"hi"},{name:"\u82d7\u8bed",key:"hmn"},{name:"\u5308\u7259\u5229\u8bed",key:"hu"},{name:"\u51b0\u5c9b\u8bed",key:"is"},{name:"\u4f0a\u535a\u8bed",key:"ig"},{name:"\u5370\u5ea6\u5c3c\u897f\u4e9a\u8bed",key:"id"},{name:"\u7231\u5c14\u5170\u8bed",key:"ga"},{name:"\u610f\u5927\u5229\u8bed",key:"it"},{name:"\u65e5\u8bed",key:"ja"},{name:"\u722a\u54c7\u8bed",key:"jw"},{name:"\u5361\u7eb3\u8fbe\u8bed",key:"kn"},{name:"\u54c8\u8428\u514b\u8bed",key:"kk"},{name:"\u9ad8\u68c9\u6587",key:"km"},{name:"\u97e9\u8bed",key:"ko"},{name:"\u5e93\u5c14\u5fb7\u8bed",key:"ku"},{name:"\u5409\u5c14\u5409\u65af\u8bed",key:"ky"},{name:"\u8001\u631d\u8bed",key:"lo"},{name:"\u62c9\u4e01\u6587",key:"la"},{name:"\u62c9\u8131\u7ef4\u4e9a\u8bed",key:"lv"},{name:"\u7acb\u9676\u5b9b\u8bed",key:"lt"},{name:"\u5362\u68ee\u5821\u8bed",key:"lb"},{name:"\u9a6c\u5176\u987f\u8bed",key:"mk"},{name:"\u9a6c\u5c14\u52a0\u4ec0\u8bed",key:"mg"},{name:"\u9a6c\u6765\u8bed",key:"ms"},{name:"\u9a6c\u62c9\u96c5\u62c9\u59c6\u6587",key:"ml"},{name:"\u9a6c\u8033\u4ed6\u8bed",key:"mt"},{name:"\u6bdb\u5229\u8bed",key:"mi"},{name:"\u9a6c\u62c9\u5730\u8bed",key:"mr"},{name:"\u8499\u53e4\u6587",key:"mn"},{name:"\u7f05\u7538\u8bed",key:"my"},{name:"\u5c3c\u6cca\u5c14\u8bed",key:"ne"},{name:"\u632a\u5a01\u8bed",key:"no"},{name:"\u5c3c\u6768\u624e\u8bed",key:"ny"},{name:"\u666e\u4ec0\u56fe\u8bed",key:"ps"},{name:"\u6ce2\u65af\u8bed",key:"fa"},{name:"\u6ce2\u5170\u8bed",key:"pl"},{name:"\u8461\u8404\u7259\u8bed",key:"pt"},{name:"\u65c1\u906e\u666e\u8bed",key:"pa"},{name:"\u7f57\u9a6c\u5c3c\u4e9a\u8bed",key:"ro"},{name:"\u4fc4\u8bed",key:"ru"},{name:"\u8428\u6469\u4e9a\u8bed",key:"sm"},{name:"\u82cf\u683c\u5170\u76d6\u5c14\u8bed",key:"gd"},{name:"\u585e\u5c14\u7ef4\u4e9a\u8bed",key:"sr"},{name:"\u585e\u7d22\u6258\u8bed",key:"st"},{name:"\u4fee\u7eb3\u8bed",key:"sn"},{name:"\u4fe1\u5fb7\u8bed",key:"sd"},{name:"\u50e7\u4f3d\u7f57\u8bed",key:"si"},{name:"\u65af\u6d1b\u4f10\u514b\u8bed",key:"sk"},{name:"\u65af\u6d1b\u6587\u5c3c\u4e9a\u8bed",key:"sl"},{name:"\u7d22\u9a6c\u91cc\u8bed",key:"so"},{name:"\u897f\u73ed\u7259\u8bed",key:"es"},{name:"\u5dfd\u4ed6\u8bed",key:"su"},{name:"\u65af\u74e6\u5e0c\u91cc\u8bed",key:"sw"},{name:"\u745e\u5178\u8bed",key:"sv"},{name:"\u5854\u52a0\u8def\u8bed",key:"tl"},{name:"\u5854\u5409\u514b\u8bed",key:"tg"},{name:"\u6cf0\u7c73\u5c14\u8bed",key:"ta"},{name:"\u6cf0\u5362\u56fa\u8bed",key:"te"},{name:"\u6cf0\u6587",key:"th"},{name:"\u571f\u8033\u5176\u8bed",key:"tr"},{name:"\u4e4c\u514b\u5170\u8bed",key:"uk"},{name:"\u4e4c\u5c14\u90fd\u8bed",key:"ur"},{name:"\u4e4c\u5179\u522b\u514b\u8bed",key:"uz"},{name:"\u8d8a\u5357\u8bed",key:"vi"},{name:"\u5a01\u5c14\u58eb\u8bed",key:"cy"},{name:"\u73ed\u56fe\u8bed",key:"xh"},{name:"\u610f\u7b2c\u7eea\u8bed",key:"yi"},{name:"\u7ea6\u9c81\u5df4\u8bed",key:"yo"},{name:"\u7956\u9c81\u8bed",key:"zu"}],N={en:[{name:"Chinese Simplified",key:"zh"},{name:"Chinese Traditional",key:"zh-TW"},{name:"English",key:"en"},{name:"Afrikaans",key:"af"},{name:"Albania",key:"sq"},{name:"Amharic",key:"am"},{name:"Arabic",key:"ar"},{name:"Armenian",key:"hy"},{name:"Azerbaijani",key:"az"},{name:"Basque",key:"eu"},{name:"Belarusian",key:"be"},{name:"Bengali",key:"bn"},{name:"Bosnia",key:"bs"},{name:"Bulgarian",key:"bg"},{name:"Catalan",key:"ca"},{name:"Cebu language",key:"ceb"},{name:"Corsican",key:"co"},{name:"Croatian",key:"hr"},{name:"Czech",key:"cs"},{name:"Danish",key:"da"},{name:"Dutch",key:"nl"},{name:"Esperanto",key:"eo"},{name:"Estonian",key:"et"},{name:"Finnish",key:"fi"},{name:"French",key:"fr"},{name:"Friesian",key:"fy"},{name:"Galician",key:"gl"},{name:"Georgian",key:"ka"},{name:"German",key:"de"},{name:"Greek",key:"el"},{name:"Gujarati",key:"gu"},{name:"Haiti Creole",key:"ht"},{name:"Hausa",key:"ha"},{name:"Hawaiian",key:"haw"},{name:"Hebrew",key:"he"},{name:"Hindi",key:"hi"},{name:"Hmong",key:"hmn"},{name:"Hungarian",key:"hu"},{name:"Icelandic",key:"is"},{name:"Ibo",key:"ig"},{name:"Indonesian",key:"id"},{name:"Irish",key:"ga"},{name:"Italian",key:"it"},{name:"Japanese",key:"ja"},{name:"Javanese",key:"jw"},{name:"Kannada",key:"kn"},{name:"Kazakh",key:"kk"},{name:"Khmer text",key:"km"},{name:"Korean",key:"ko"},{name:"Kurdish",key:"ku"},{name:"Kyrgyz",key:"ky"},{name:"Laotian",key:"lo"},{name:"Latin",key:"la"},{name:"Latvian",key:"lv"},{name:"Lithuania",key:"lt"},{name:"Luxembourg",key:"lb"},{name:"Macedonian",key:"mk"},{name:"Malagasy",key:"mg"},{name:"Malay",key:"ms"},{name:"Malayalam",key:"ml"},{name:"Malta",key:"mt"},{name:"Maori",key:"mi"},{name:"Marathi",key:"mr"},{name:"Mongolian",key:"mn"},{name:"Burmese",key:"my"},{name:"Nepalese",key:"ne"},{name:"Norwegian",key:"no"},{name:"Nyanza",key:"ny"},{name:"Pashto",key:"ps"},{name:"Persian",key:"fa"},{name:"Polish",key:"pl"},{name:"Portuguese",key:"pt"},{name:"Punjabi",key:"pa"},{name:"Romanian",key:"ro"},{name:"Russian",key:"ru"},{name:"Samoan",key:"sm"},{name:"Scottish Gaelic",key:"gd"},{name:"Serbian",key:"sr"},{name:"Sesotho",key:"st"},{name:"Shanna",key:"sn"},{name:"Sin German",key:"sd"},{name:"Sinhala",key:"si"},{name:"Slovakian",key:"sk"},{name:"Slovenian",key:"sl"},{name:"Somali",key:"so"},{name:"Spanish",key:"es"},{name:"Sundanese",key:"su"},{name:"Swahili",key:"sw"},{name:"Swedish",key:"sv"},{name:"Tagalogian",key:"tl"},{name:"Tajik",key:"tg"},{name:"Tamil",key:"ta"},{name:"Telugu",key:"te"},{name:"Thai",key:"th"},{name:"Turkish",key:"tr"},{name:"Ukrainian",key:"uk"},{name:"Urdu",key:"ur"},{name:"Uzbek",key:"uz"},{name:"Vietnamese",key:"vi"},{name:"Welsh",key:"cy"},{name:"bantu",key:"xh"},{name:"Yiddish",key:"yi"},{name:"Yoruba",key:"yo"},{name:"zulu",key:"zu"}],zh:R,"zh-cn":R,"zh-tw":R},D=t(27),L=t(30),A=t(71),z=t.n(A),_=function(){function e(n){Object(D.a)(this,e),this.start=n.start,this.end=n.end,this.text=n.text,this.text2=n.text2}return Object(L.a)(e,[{key:"check",get:function(){return this.startTime>=0&&this.endTime>=0&&this.startTime<this.endTime}},{key:"clone",get:function(){return new e(this)}},{key:"startTime",get:function(){return x.a.t2d(this.start)},set:function(e){this.start=x.a.d2t(z()(e,0,1/0))}},{key:"endTime",get:function(){return x.a.t2d(this.end)},set:function(e){this.end=x.a.d2t(z()(e,0,1/0))}},{key:"duration",get:function(){return parseFloat((this.endTime-this.startTime).toFixed(3))}}]),e}();function I(e){var n=new RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split(/[:.]/).map((function(e,n,t){if(n===t.length-1){if(1===e.length)return"."+e+"00";if(2===e.length)return"."+e+"0"}else if(1===e.length)return(0===n?"0":":0")+e;return 0===n?e:n===t.length-1?"."+e:":"+e})).join("")}return"WEBVTT\n\n"+e.split(/\r?\n/).map((function(e){var a=e.match(n);return a?{start:t(a[1].trim()),end:t(a[2].trim()),text:a[5].replace(/{[\s\S]*?}/g,"").replace(/(\\N)/g,"\n").trim().split(/\r?\n/).map((function(e){return e.trim()})).join("\n")}:null})).filter((function(e){return e})).map((function(e,n){return e?n+1+"\n"+e.start+" --\x3e "+e.end+"\n"+e.text:""})).filter((function(e){return e.trim()})).join("\n\n")}function M(e){return new Promise((function(n){var t=document.createElement("video"),a=document.createElement("track");a.default=!0,a.kind="metadata",t.appendChild(a),a.onload=function(){n(Array.from(a.track.cues).map((function(e){var n=x.a.d2t(e.startTime),t=x.a.d2t(e.endTime),a=e.text;return new _({start:n,end:t,text:a})})))},a.src=e}))}function P(e){return URL.createObjectURL(new Blob([e],{type:"text/vtt"}))}var F=function(e){var n=[],t="",a=e.split(/[:.]/).map((function(e){return Number(e)}));return(a=e.split(/[:.]/).map((function(e){return Number(e)})))[3]="0."+("00"+a[3]).slice(-3),t=(t=(60*a[0]*60+60*a[1]+a[2]+Number(a[3])).toFixed(2)).toString().split("."),n.unshift(t[1]),t=Number(t[0]),n.unshift(("0"+(t%60).toString()).slice(-2)),n.unshift(("0"+(Math.floor(t/60)%60).toString()).slice(-2)),n.unshift((Math.floor(t/3600)%60).toString()),n.slice(0,3).join(":")+"."+n[3]};function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;if(!e.trim())return Promise.resolve("");var t=new URL("https://translate.googleapis.com/translate_a/single");return t.searchParams.append("client","gtx"),t.searchParams.append("sl","auto"),t.searchParams.append("dt","t"),t.searchParams.append("tl",n),t.searchParams.append("q",e),new Promise((function(e,n){fetch(t.href).then((function(e){return e.json()})).then((function(n){e(n?n[0].map((function(e){return e[0].trim()})).join("\n"):"")})).catch((function(e){n(e)}))}))}function B(){return(B=Object(C.a)(E.a.mark((function e(){var n,t,a=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:[],t=a.length>1?a[1]:void 0,e.abrupt("return",new Promise((function(e,a){var r=[];!function i(){var o=n.shift();o?U(o.text,t).then((function(e){o.text=e,r.push(o),u(100).then(i)})).catch((function(e){a(e)})):e(r)}()})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G,X=t(171),H=t.n(X),V=t(2),W=new FileReader,K=H.a.createFFmpeg,Y=H.a.fetchFile,q=K({log:!0}),J=T.b.div(G||(G=Object(y.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    padding-bottom: 20px;\n    position: relative;\n    box-shadow: 0px 5px 25px 5px rgb(0 0 0 / 80%);\n    background-color: rgb(0 0 0 / 100%);\n\n    .import {\n        display: flex;\n        justify-content: space-between;\n        padding: 10px;\n        border-bottom: 1px solid rgb(255 255 255 / 20%);\n\n        .btn {\n            position: relative;\n            opacity: 0.85;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 35px;\n            width: 48%;\n            border-radius: 3px;\n            color: #fff;\n            cursor: pointer;\n            font-size: 14px;\n            background-color: #3f51b5;\n            transition: all 0.2s ease 0s;\n\n            &:hover {\n                opacity: 1;\n            }\n        }\n\n        .file {\n            position: absolute;\n            left: 0;\n            top: 0;\n            right: 0;\n            bottom: 0;\n            width: 100%;\n            height: 100%;\n            opacity: 0;\n        }\n    }\n\n    .export {\n        display: flex;\n        justify-content: space-between;\n        padding: 10px;\n        border-bottom: 1px solid rgb(255 255 255 / 20%);\n\n        .btn {\n            position: relative;\n            opacity: 0.85;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 35px;\n            width: 31%;\n            border-radius: 3px;\n            color: #fff;\n            cursor: pointer;\n            font-size: 14px;\n            background-color: #009688;\n            transition: all 0.2s ease 0s;\n\n            &:hover {\n                opacity: 1;\n            }\n        }\n    }\n\n    .operate {\n        display: flex;\n        justify-content: space-between;\n        padding: 10px;\n        border-bottom: 1px solid rgb(255 255 255 / 20%);\n\n        .btn {\n            position: relative;\n            opacity: 0.85;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 35px;\n            width: 48%;\n            border-radius: 3px;\n            color: #fff;\n            cursor: pointer;\n            font-size: 14px;\n            background-color: #009688;\n            transition: all 0.2s ease 0s;\n\n            &:hover {\n                opacity: 1;\n            }\n        }\n    }\n\n    .translate {\n        display: flex;\n        justify-content: space-between;\n        padding: 10px;\n        border-bottom: 1px solid rgb(255 255 255 / 20%);\n\n        select {\n            width: 65%;\n            outline: none;\n            padding: 0 5px;\n            border-radius: 3px;\n        }\n\n        .btn {\n            opacity: 0.85;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 35px;\n            width: 33%;\n            border-radius: 3px;\n            color: #fff;\n            cursor: pointer;\n            font-size: 14px;\n            background-color: #673ab7;\n            transition: all 0.2s ease 0s;\n\n            &:hover {\n                opacity: 1;\n            }\n        }\n    }\n\n    .hotkey {\n        display: flex;\n        justify-content: space-between;\n        padding: 10px;\n\n        span {\n            width: 49%;\n            font-size: 13px;\n            padding: 5px 0;\n            border-radius: 3px;\n            text-align: center;\n            color: rgb(255 255 255 / 75%);\n            background-color: rgb(255 255 255 / 20%);\n        }\n    }\n\n    .bottom {\n        padding: 10px;\n        a {\n            display: flex;\n            flex-direction: column;\n            border: 1px solid rgb(255 255 255 / 30%);\n            text-decoration: none;\n\n            .title {\n                color: #ffeb3b;\n                padding: 5px 10px;\n                animation: animation 3s infinite;\n                border-bottom: 1px solid rgb(255 255 255 / 30%);\n            }\n\n            @keyframes animation {\n                50% {\n                    color: #00bcd4;\n                }\n            }\n\n            img {\n                max-width: 100%;\n            }\n        }\n    }\n\n    .progress {\n        position: fixed;\n        left: 0;\n        top: 0;\n        right: 0;\n        z-index: 9;\n        height: 2px;\n        background-color: rgb(0 0 0 / 50%);\n\n        span {\n            display: inline-block;\n            position: absolute;\n            left: 0;\n            top: 0;\n            bottom: 0;\n            width: 0;\n            height: 100%;\n            background-color: #ff9800;\n            transition: all 0.2s ease 0s;\n        }\n    }\n"])));function $(e){var n=e.player,t=e.waveform,r=e.newSub,i=e.undoSubs,o=e.clearSubs,s=e.language,c=e.subtitle,u=e.setLoading,d=e.formatSub,m=e.setSubtitle,h=e.notify,f=Object(a.useState)(0),p=Object(g.a)(f,2),y=p[0],v=p[1],k=Object(a.useState)("en"),j=Object(g.a)(k,2),x=j[0],O=j[1],w=Object(a.useCallback)(function(){var e=Object(C.a)(E.a.mark((function e(n){var a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.size>268435456)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h({message:Object(b.t)("DECODE_START"),level:"info"}),e.next=6,q.load();case 6:return e.t0=q,e.t1=n.name,e.next=10,Y(n);case 10:return e.t2=e.sent,e.t0.FS.call(e.t0,"writeFile",e.t1,e.t2),a="".concat(Date.now(),".mp3"),e.next=15,q.run("-i",n.name,"-ac","1","-ar","8000",a);case 15:return r=q.FS("readFile",a),e.next=18,t.decoder.decodeAudioData(r);case 18:t.drawer.update(),v(0),h({message:Object(b.t)("DECODE_SUCCESS"),level:"success"}),e.next=27;break;case 23:e.prev=23,e.t3=e.catch(2),v(0),h({message:Object(b.t)("DECODE_ERROR"),level:"error"});case 27:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(n){return e.apply(this,arguments)}}(),[t,h]);Object(a.useEffect)((function(){t&&!W.onload&&(W.onload=function(e){t.decoder.destroy(),t.drawer.update(),t.load({sampleRate:44100,getChannelData:function(){return new Float32Array(e.target.result)}})})}),[t]),Object(a.useEffect)((function(){q.setProgress((function(e){var n=e.ratio;v(n)}))}),[]);var T=Object(a.useCallback)((function(e){var a=e.target.files[0];if(a){var i=l(a.name),s=n.canPlayType(a.type);if("maybe"===s||"probably"===s){w(a);var c=URL.createObjectURL(new Blob([a]));t.decoder.destroy(),t.drawer.update(),t.seek(0),n.currentTime=0,o(),m([r({start:"00:00:00.000",end:"00:00:01.000",text:Object(b.t)("SUB_TEXT")})]),n.src=c}else"pcm"===i?W.readAsArrayBuffer(a):h({message:"".concat(Object(b.t)("VIDEO_EXT_ERR"),": ").concat(a.type||i),level:"error"})}}),[r,h,n,m,t,o,w]),S=Object(a.useCallback)((function(e){var n=e.target.files[0];if(n){var t=l(n.name);["ass","vtt","srt","json"].includes(t)?function(e){return new Promise((function(n,t){var a=new FileReader;a.onload=Object(C.a)(E.a.mark((function r(){var i,o,s,c,u,d,m,b,h,f,p,g;return E.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("json"!==(i=l(e.name))){r.next=5;break}try{o=JSON.parse(a.result).map((function(e){return new _(e)})),n(o)}catch(y){t(y)}r.next=34;break;case 5:s=a.result.replace(/{[\s\S]*?}/g,""),r.t0=i,r.next="vtt"===r.t0?9:"ass"===r.t0?15:"srt"===r.t0?22:"json"===r.t0?29:32;break;case 9:return c=P(s),r.next=12,M(c);case 12:return u=r.sent,n(u),r.abrupt("break",34);case 15:return d=I(s),m=P(d),r.next=19,M(m);case 19:return b=r.sent,n(b),r.abrupt("break",34);case 22:return h="WEBVTT \r\n\r\n".concat(s.replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").replace(/{[\s\S]*?}/g,"").concat("\r\n\r\n")),f=P(h),r.next=26,M(f);case 26:return p=r.sent,n(p),r.abrupt("break",34);case 29:return g=JSON.parse(s).map((function(e){return new _(e)})),n(g),r.abrupt("break",34);case 32:return n([]),r.abrupt("break",34);case 34:case"end":return r.stop()}}),r)}))),a.readAsText(e)}))}(n).then((function(e){o(),m(e)})).catch((function(e){h({message:e.message,level:"error"})})):h({message:"".concat(Object(b.t)("SUB_EXT_ERR"),": ").concat(t),level:"error"})}}),[h,m,o]),R=Object(a.useCallback)((function(e){e.target.value=""}),[]),D=Object(a.useCallback)((function(e){var n="",t="".concat(Date.now(),".").concat(e);switch(e){case"vtt":n="WEBVTT\n\n"+c.map((function(e,n){return n+1+"\n"+e.start+" --\x3e "+e.end+"\n"+e.text})).join("\n\n");break;case"srt":n=function(e){return e.map((function(e,n){return"".concat(n+1,"\n").concat(e.start.replace(".",",")," --\x3e ").concat(e.end.replace(".",","),"\n").concat(e.text)})).join("\n\n")}(c);break;case"ass":n=function(e){return"\n[Script Info]\n; // \u6b64\u5b57\u5e55\u7531\u7231\u5e55\u751f\u6210\nSynch Point:1\nScriptType:v4.00+\nCollisions:Normal\n\n[V4+ Styles]\nFormat: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding\nStyle: Default, Microsoft YaHei, 20, &H00FFFFFF, &H000000FF, &H00000000, &H00000000, 0, 0, 0, 0, 100, 100, 0, 0, 1, 1, 0, 2, 10, 10, 10, 134\n\n[Events]\nFormat: Layer, Start, End, Style, Actor, MarginL, MarginR, MarginV, Effect, Text\n".concat(e.map((function(e){var n=F(e.start),t=F(e.end),a=e.text.replace(/\r?\n/g,"\\N");return"Dialogue: 0,".concat(n,",").concat(t,",Default,NTP,0000,0000,0000,,").concat(a)})).join("\n"),"\n    ").trim()}(c);break;case"txt":n=function(e){return e.map((function(e){return e.text})).join("\n\n")}(c);break;case"json":n=JSON.stringify(c)}!function(e,n){var t=document.createElement("a");t.style.display="none",t.href=e,t.download=n,document.body.appendChild(t),t.click(),document.body.removeChild(t)}(URL.createObjectURL(new Blob([n])),t)}),[c]),L=Object(a.useCallback)((function(){u(Object(b.t)("TRANSLATING")),function(){return B.apply(this,arguments)}(d(c),x).then((function(e){u(""),m(d(e)),h({message:Object(b.t)("TRANSLAT_SUCCESS"),level:"success"})})).catch((function(e){u(""),h({message:e.message,level:"error"})}))}),[c,u,d,m,x,h]);return Object(V.jsxs)(J,{className:"tool",children:[[0,1].includes(y)?null:Object(V.jsx)("div",{className:"progress",children:Object(V.jsx)("span",{style:{width:"".concat(100*y,"%")}})}),Object(V.jsxs)("div",{className:"top",children:[Object(V.jsxs)("div",{className:"import",children:[Object(V.jsxs)("div",{className:"btn",children:[Object(V.jsx)(b.Translate,{value:"OPEN_VIDEO"}),Object(V.jsx)("input",{className:"file",type:"file",onChange:T,onClick:R})]}),Object(V.jsxs)("div",{className:"btn",children:[Object(V.jsx)(b.Translate,{value:"OPEN_SUB"}),Object(V.jsx)("input",{className:"file",type:"file",onChange:S,onClick:R})]})]}),Object(V.jsxs)("div",{className:"export",children:[Object(V.jsx)("div",{className:"btn",onClick:function(){return D("ass")},children:Object(V.jsx)(b.Translate,{value:"EXPORT_ASS"})}),Object(V.jsx)("div",{className:"btn",onClick:function(){return D("srt")},children:Object(V.jsx)(b.Translate,{value:"EXPORT_SRT"})}),Object(V.jsx)("div",{className:"btn",onClick:function(){return D("vtt")},children:Object(V.jsx)(b.Translate,{value:"EXPORT_VTT"})})]}),Object(V.jsxs)("div",{className:"operate",children:[Object(V.jsx)("div",{className:"btn",onClick:o,children:Object(V.jsx)(b.Translate,{value:"CLEAR"})}),Object(V.jsx)("div",{className:"btn",onClick:i,children:Object(V.jsx)(b.Translate,{value:"UNDO"})})]}),Object(V.jsxs)("div",{className:"translate",children:[Object(V.jsx)("select",{value:x,onChange:function(e){return O(e.target.value)},children:(N[s]||N.en).map((function(e){return Object(V.jsx)("option",{value:e.key,children:e.name},e.key)}))}),Object(V.jsx)("div",{className:"btn",onClick:L,children:Object(V.jsx)(b.Translate,{value:"TRANSLATE"})})]}),Object(V.jsxs)("div",{className:"hotkey",children:[Object(V.jsx)("span",{children:Object(V.jsx)(b.Translate,{value:"HOTKEY_01"})}),Object(V.jsx)("span",{children:Object(V.jsx)(b.Translate,{value:"HOTKEY_02"})})]})]}),Object(V.jsx)("div",{className:"bottom",children:Object(V.jsxs)("a",{href:"https://online.aimu-app.com/",children:[Object(V.jsx)("div",{className:"title",children:"\u5168\u65b0\u5b57\u5e55\u7f16\u8f91\u5668\u6765\u4e86\uff0c\u70b9\u51fb\u8fd9\u91cc\u4f53\u9a8c"}),Object(V.jsx)("img",{src:"/aimu.png",alt:"aimu"})]})})]})}var Z,Q=t(259);function ee(e){for(var n=[],t=0;t<10;t+=1)for(var a=0;a<5;a+=1)0!==t&&9!==t&&0!==a&&4!==a||n.push(e(t,a,10,5));return n}function ne(e,n){var t,a,r=document.createElement("div");r.classList.add("backlight"),t=r,a={position:"absolute",zIndex:9,left:0,top:0,right:0,bottom:0,width:"100%",height:"100%"},Object.keys(a).forEach((function(e){!function(e,n,t){e.style[n]=t}(t,e,a[e])}));var i,o=(i=r,ee((function(e,n,t,a){var r=document.createElement("div");return r.style.position="absolute",r.style.left="".concat(100*e/t,"%"),r.style.top="".concat(100*n/a,"%"),r.style.width="".concat(100/t,"%"),r.style.height="".concat(100/a,"%"),r.style.borderRadius="50%",r.style.transition="all .2s ease",i.appendChild(r),{$box:r,left:0===e,right:e===t-1,top:0===n,bottom:n===a-1}}))),s=document.createElement("canvas");function c(){var e=n.clientWidth,t=n.clientHeight;(function(e,n,t,a){var r=e.getContext("2d");return e.width=t,e.height=a,r.drawImage(n,0,0),ee((function(e,n,i,o){for(var s=t/i,c=a/o,l=e*s,u=n*c,d=r.getImageData(l,u,s,c).data,m=0,b=0,h=0,f=0,p=d.length;f<p;f+=4)m+=d[f],b+=d[f+1],h+=d[f+2];return{r:m=Math.floor(m/(d.length/4)),g:b=Math.floor(b/(d.length/4)),b:h=Math.floor(h/(d.length/4))}}))})(s,n,e,t).forEach((function(e,n){var t=e.r,a=e.g,r=e.b,i=o[n],s=i.$box,c=i.left,l=i.right,u=i.top,d=i.bottom,m=c?"-64px":l?"64px":"0",b=u?"-64px":d?"64px":"0";s.style.boxShadow="rgb(".concat(t,", ").concat(a,", ").concat(r,") ").concat(m," ").concat(b," 128px")}))}e.insertBefore(r,n),n.addEventListener("seeked",c),n.addEventListener("loadedmetadata",(function(){return setTimeout(c,1e3)})),function e(){window.requestAnimationFrame((function(){m(n)&&c(),e()}))}()}var te=T.b.div(Z||(Z=Object(y.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    width: 100%;\n    padding: 20% 10%;\n\n    .video {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: auto;\n        width: auto;\n        position: relative;\n\n        video {\n            position: relative;\n            z-index: 10;\n            outline: none;\n            max-height: 100%;\n            max-width: 100%;\n            box-shadow: 0px 5px 25px 5px rgb(0 0 0 / 80%);\n            background-color: #000;\n            cursor: pointer;\n        }\n\n        .subtitle {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            position: absolute;\n            z-index: 20;\n            left: 0;\n            right: 0;\n            bottom: 5%;\n            width: 100%;\n            padding: 0 20px;\n            user-select: none;\n            pointer-events: none;\n\n            .operate {\n                padding: 5px 15px;\n                color: #fff;\n                font-size: 13px;\n                border-radius: 3px;\n                margin-bottom: 5px;\n                background-color: rgb(0 0 0 / 75%);\n                border: 1px solid rgb(255 255 255 / 20%);\n                cursor: pointer;\n                pointer-events: all;\n            }\n\n            .textarea {\n                width: 100%;\n                outline: none;\n                resize: none;\n                text-align: center;\n                line-height: 1.2;\n                border: none;\n                color: #fff;\n                font-size: 20px;\n                padding: 5px 10px;\n                user-select: all;\n                pointer-events: all;\n                background-color: rgb(0 0 0 / 0);\n                text-shadow: rgb(0 0 0) 1px 0px 1px, rgb(0 0 0) 0px 1px 1px, rgb(0 0 0) -1px 0px 1px,\n                    rgb(0 0 0) 0px -1px 1px;\n\n                &.pause {\n                    background-color: rgb(0 0 0 / 50%);\n                }\n            }\n        }\n    }\n"]))),ae=Object(a.memo)((function(e){var n=e.setPlayer,t=e.setCurrentTime,r=e.setPlaying,i=Object(a.createRef)();Object(a.useEffect)((function(){n(i.current),function e(){window.requestAnimationFrame((function(){i.current&&(r(m(i.current)),t(i.current.currentTime||0)),e()}))}()}),[n,t,r,i]);var o=Object(a.useCallback)((function(){i.current&&(m(i.current)?i.current.pause():i.current.play())}),[i]);return Object(V.jsx)("video",{onClick:o,src:"/sample.mp4?t=1",ref:i})}),(function(){return!0}));function re(e){var n=Object(a.useState)(null),t=Object(g.a)(n,2),r=t[0],i=t[1],o=Object(a.useState)(!1),s=Object(g.a)(o,2),c=s[0],l=s[1],u=Object(a.useState)(0),d=Object(g.a)(u,2),m=d[0],h=d[1],f=Object(a.createRef)();Object(a.useEffect)((function(){f.current&&e.player&&!ne.state&&(ne.state=!0,ne(f.current,e.player))}),[f,e.player]),Object(a.useMemo)((function(){i(e.subtitle[e.currentIndex])}),[e.subtitle,e.currentIndex]);var y=Object(a.useCallback)((function(n){e.player.pause(),e.updateSub(r,{text:n.target.value}),n.target.selectionStart&&h(n.target.selectionStart)}),[e,r]),v=Object(a.useCallback)((function(n){e.player.pause(),n.target.selectionStart&&h(n.target.selectionStart)}),[e]),k=Object(a.useCallback)((function(e){l(!0),e.target.selectionStart&&h(e.target.selectionStart)}),[]),j=Object(a.useCallback)((function(){setTimeout((function(){return l(!1)}),500)}),[]),x=Object(a.useCallback)((function(){e.splitSub(r,m)}),[e,r,m]);return Object(V.jsx)(te,{className:"player",children:Object(V.jsxs)("div",{className:"video",ref:f,children:[Object(V.jsx)(ae,Object(p.a)({},e)),e.player&&r?Object(V.jsxs)("div",{className:"subtitle",children:[c?Object(V.jsx)("div",{className:"operate",onClick:x,children:Object(V.jsx)(b.Translate,{value:"SPLIT"})}):null,Object(V.jsx)(Q.a,{className:"textarea ".concat(e.playing?"":"pause"),value:r.text,onChange:y,onClick:v,onFocus:k,onBlur:j,spellCheck:!1})]}):null]})})}var ie=t(260),oe=t(53),se=t(126),ce=t(128),le=t(174),ue=t.n(le),de=function(){function e(){Object(D.a)(this,e)}return Object(L.a)(e,[{key:"on",value:function(e,n,t){var a=this.e||(this.e={});return(a[e]||(a[e]=[])).push({fn:n,ctx:t}),this}},{key:"once",value:function(e,n,t){var a=this;function r(){a.off(e,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];n.apply(t,o)}return r._=n,this.on(e,r,t)}},{key:"emit",value:function(e){for(var n=((this.e||(this.e={}))[e]||[]).slice(),t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];for(var i=0;i<n.length;i+=1)n[i].fn.apply(n[i].ctx,a);return this}},{key:"off",value:function(e,n){var t=this.e||(this.e={}),a=t[e],r=[];if(a&&n)for(var i=0,o=a.length;i<o;i+=1)a[i].fn!==n&&a[i].fn._!==n&&r.push(a[i]);return r.length?t[e]=r:delete t[e],this}}]),e}(),me=function(){function e(){Object(D.a)(this,e),this.destroyEvents=[],this.proxy=this.proxy.bind(this)}return Object(L.a)(e,[{key:"proxy",value:function(e,n,t){var a=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Array.isArray(n)?n.forEach((function(n){return a.proxy(e,n,t,r)})):(e.addEventListener(n,t,r),this.destroyEvents.push((function(){e.removeEventListener(n,t,r)})))}},{key:"destroy",value:function(){this.destroyEvents.forEach((function(e){return e()}))}}]),e}(),be=t(261),he=function(e){Object(se.a)(t,e);var n=Object(ce.a)(t);function t(e){var a;return Object(D.a)(this,t),(a=n.call(this,e)).name="WFPlayerError",a}return t}(Object(be.a)(Error));function fe(e,n){if(!e)throw new he(n);return e}function pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return x.a.d2t(e)}function ge(e,n,t){return Math.max(Math.min(e,Math.max(n,t)),Math.min(n,t))}var ye,ve=function(){function e(n){Object(D.a)(this,e),this.wf=n,this.canvas=null,this.update()}return Object(L.a)(e,[{key:"update",value:function(){var e=this.wf.options,n=e.container,t=e.pixelRatio,a=n.clientWidth,r=n.clientHeight;this.canvas?(this.canvas.width=a*t,this.canvas.height=r*t):(fe(this.wf.constructor.instances.every((function(e){return e.options.container!==n})),"Cannot mount multiple instances on the same dom element, please destroy the previous instance first."),fe(a&&r,"The width and height of the container cannot be 0"),n.innerHTML="",this.canvas=document.createElement("canvas"),this.canvas.width=a*t,this.canvas.height=r*t,this.canvas.style.width="100%",this.canvas.style.height="100%",n.appendChild(this.canvas))}},{key:"exportImage",value:function(){var e=document.createElement("a");e.style.display="none",e.href=this.canvas.toDataURL("image/png"),e.download="".concat(Date.now(),".png"),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},{key:"destroy",value:function(){this.wf.options.container.innerHTML=""}}]),e}(),ke=function(){function e(n){var t=this;Object(D.a)(this,e),this.wf=n,this.canvas=n.template.canvas,this.ctx=this.canvas.getContext("2d"),this.gridNum=0,this.gridGap=0,this.beginTime=0,this.update(),n.on("options",(function(){t.update()})),n.on("channelData",(function(){t.update()}))}return Object(L.a)(e,[{key:"update",value:function(){var e=this.wf,n=e.currentTime,t=e.options,a=t.cursor,r=t.grid,i=t.ruler,o=t.wave,s=t.duration,c=t.padding;this.gridNum=10*s+2*c,this.gridGap=this.canvas.width/this.gridNum,this.beginTime=n-s/2,this.density={1:5,2:4,3:3,4:3,5:2,6:2,7:2,8:2}[Math.floor(this.gridGap)]||1,this.wf.emit("render",{padding:c,duration:s,gridGap:this.gridGap,gridNum:this.gridNum,beginTime:this.beginTime}),this.drawBackground(),r&&this.drawGrid(),i&&this.drawRuler(),o&&this.drawWave(),a&&this.drawCursor()}},{key:"drawBackground",value:function(){var e=this.wf.options,n=e.backgroundColor,t=e.paddingColor,a=e.padding,r=this.canvas,i=r.width,o=r.height;this.ctx.clearRect(0,0,i,o),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,a*this.gridGap,o),this.ctx.fillRect(i-a*this.gridGap,0,a*this.gridGap,o)}},{key:"drawWave",value:function(){var e=this.wf,n=e.options,t=n.progress,a=n.waveColor,r=n.progressColor,i=n.duration,o=n.padding,s=n.waveScale,c=e.decoder,l=c.channelData,u=c.audiobuffer.sampleRate;if(l.length)for(var d=this.canvas,m=d.width,b=d.height/2,h=m-this.gridGap*o*2,f=Math.floor(this.beginTime*u),p=Math.floor(ge((this.beginTime+i)*u,f,1/0)),g=Math.floor((p-f)/h),y=m/2,v=0,k=0,j=1,x=-1,O=f;O<p;O+=1){v+=1;var w=l[O]||0;if(w<j?j=w:w>x&&(x=w),v>=g&&k<h){k+=1;var T=this.gridGap*o+k;this.ctx.fillStyle=t&&y>=T?r:a,this.ctx.fillRect(T,(1+j*s)*b,1,Math.max(1,(x-j)*b*s)),v=0,j=1,x=-1}}}},{key:"drawGrid",value:function(){var e=this.wf.currentTime,n=this.wf.options,t=n.gridColor,a=n.pixelRatio,r=this.canvas,i=r.width,o=r.height;this.ctx.fillStyle=t;for(var s=0;s<this.gridNum+10;s+=this.density)this.ctx.fillRect(this.gridGap*s-(e-parseInt(e))*this.gridGap*10,0,a,o);for(var c=0;c<o/this.gridGap;c+=this.density)this.ctx.fillRect(0,this.gridGap*c,i,a)}},{key:"drawRuler",value:function(){var e=this.wf.currentTime,n=this.wf.options,t=n.rulerColor,a=n.pixelRatio,r=n.padding,i=n.rulerAtTop,o=this.canvas.height;this.ctx.font="".concat(11*a,"px Arial"),this.ctx.fillStyle=t;for(var s=-1,c=0;c<this.gridNum+10;c+=1)if(c&&c>=r&&c<=this.gridNum+10&&(c-r)%10===0){s+=1,this.ctx.fillRect(this.gridGap*c-(e-parseInt(e))*this.gridGap*10,i?0:o-15*a,a,15*a);var l=this.beginTime+s;if((c-r)%(10*this.density)===0&&l>=0){var u=pe(l).split(".")[0],d=this.gridGap*c-(e-parseInt(e))*this.gridGap*10-11*a*2+a,m=i?30*a:o-30*a+11;this.ctx.fillText(u,d,m)}}else c&&(c-r)%5===0&&this.ctx.fillRect(this.gridGap*c-(e-parseInt(e))*this.gridGap*10,i?0:o-7.5*a,a,7.5*a)}},{key:"drawCursor",value:function(){var e=this.wf.options,n=e.cursorColor,t=e.pixelRatio,a=this.canvas,r=a.width,i=a.height;this.ctx.fillStyle=n,this.ctx.fillRect(r/2,0,t,i)}}]),e}(),je=t(70),xe=t.n(je),Oe=function(){function e(n){var t=this;Object(D.a)(this,e),this.wf=n,this.audioCtx=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,44100),this.throttleDecodeAudioData=xe()(this.decodeAudioData,1e3),this.audiobuffer=this.audioCtx.createBuffer(1,2,44100),this.channelData=new Float32Array,this.wf.on("loading",(function(e){t.throttleDecodeAudioData(e)}))}return Object(L.a)(e,[{key:"decodeAudioData",value:function(e){var n=this;return new Promise((function(t){n.audioCtx.decodeAudioData(e.buffer,(function(e){n.decodeSuccess(e),t(e)}),(function(){return t()}))}))}},{key:"decodeSuccess",value:function(e){this.audiobuffer=e,this.wf.emit("audiobuffer",this.audiobuffer),this.wf.emit("decodeing",this.audiobuffer.duration/this.wf.duration),this.channelData=e.getChannelData(this.wf.options.channel),this.wf.emit("channelData",this.channelData)}},{key:"changeChannel",value:function(e){this.channelData=this.audiobuffer.getChannelData(e),this.wf.emit("channelData",this.channelData)}},{key:"destroy",value:function(){this.audiobuffer=this.audioCtx.createBuffer(1,2,44100),this.channelData=new Float32Array}}]),e}(),we=function(){function e(n){Object(D.a)(this,e),this.wf=n,this.fileSize=0,this.loadSize=0,this.data=new Uint8Array,this.reader=null,this.abortController=null}return Object(L.a)(e,[{key:"load",value:function(e){var n=this;this.destroy(),this.abortController=new AbortController;var t=this.wf.options,a=t.withCredentials,r=t.cors,i=t.headers;return this.wf.emit("loadStart"),fetch(e,{credentials:a?"include":"omit",mode:r?"cors":"no-cors",signal:this.abortController.signal,headers:i}).then((function(e){return e.body&&"function"===typeof e.body.getReader?(n.fileSize=Number(e.headers.get("content-length")),n.wf.emit("fileSize",n.fileSize),n.reader=e.body.getReader(),function e(){var n=this;return this.reader.read().then((function(t){var a=t.done,r=t.value;return a?(n.wf.emit("loadEnd"),null):(n.loadSize+=r.byteLength,n.wf.emit("downloading",n.loadSize/n.fileSize),n.data=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var a=n[0].constructor;return n.reduce((function(e,n){var t=new a((0|e.byteLength)+(0|n.byteLength));return t.set(e,0),t.set(n,0|e.byteLength),t}),new a)}(n.data,r),n.wf.emit("loading",n.data.slice()),e.call(n))}))}.call(n)):e.arrayBuffer()})).then((function(e){if(e&&e.byteLength){var t=new Uint8Array(e);n.fileSize=t.byteLength,n.wf.emit("fileSize",n.fileSize),n.loadSize=t.byteLength,n.wf.emit("downloading",n.loadSize/n.fileSize),n.wf.emit("loading",t),n.wf.emit("loadEnd")}}))}},{key:"destroy",value:function(){this.fileSize=0,this.loadSize=0,this.data=new Uint8Array,this.reader&&(this.reader.cancel(),this.reader=null),this.abortController&&(this.abortController.abort(),this.abortController=null)}}]),e}(),Te=function(){function e(n){var t=this;Object(D.a)(this,e),this.wf=n,this.playTimer=null,this.wf.on("load",(function(){t.clickInit(),t.resizeInit(),t.playInit()}))}return Object(L.a)(e,[{key:"getTimeFromEvent",value:function(e){var n=this.wf,t=n.currentTime,a=n.template.canvas,r=n.options,i=r.duration,o=r.padding,s=r.container,c=r.pixelRatio,l=10*i+2*o,u=a.width/l,d=ge(e.pageX-s.offsetLeft-o*u/c,0,1/0);return Math.floor(t/i)*i+ge(d/u*c/10,0,i)}},{key:"clickInit",value:function(){var e=this,n=this.wf,t=n.template.canvas,a=n.events.proxy,r=n.options.mediaElement;a(t,["click","contextmenu"],(function(n){var t=e.getTimeFromEvent(n);e.wf.emit(n.type,t,n),r&&r.currentTime!==t&&(r.currentTime=t),e.wf.drawer.update()}))}},{key:"resizeInit",value:function(){var e=this,n=this.wf,t=n.template,a=n.drawer,r=n.events.proxy,i=xe()((function(){t.update(),a.update(),e.wf.emit("resize")}),500);r(window,["resize","orientationchange"],(function(){i()}))}},{key:"playInit",value:function(){var e=this.wf,n=e.drawer,t=e.events.proxy,a=e.options.mediaElement;a&&(t(a,"seeked",(function(){n.update()})),function e(){var t=this;this.playTimer=requestAnimationFrame((function(){t.wf.playing&&(n.update(),t.wf.emit("playing",a.currentTime)),t.wf.isDestroy||e.call(t)}))}.call(this))}},{key:"destroy",value:function(){cancelAnimationFrame(this.playTimer)}}]),e}(),Se=0,Ee=[],Ce=function(e){Object(se.a)(t,e);var n=Object(ce.a)(t);function t(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(D.a)(this,t),(e=n.call(this))._currentTime=0,e.isDestroy=!1,e.options={},e.setOptions(a),e.events=new me(Object(oe.a)(e)),e.template=new ve(Object(oe.a)(e)),e.decoder=new Oe(Object(oe.a)(e)),e.drawer=new ke(Object(oe.a)(e)),e.controller=new Te(Object(oe.a)(e)),e.loader=new we(Object(oe.a)(e)),Se+=1,e.id=Se,Ee.push(Object(oe.a)(e)),e}return Object(L.a)(t,[{key:"currentTime",get:function(){return this.options.mediaElement?this.options.mediaElement.currentTime:this._currentTime}},{key:"duration",get:function(){return this.options.mediaElement?this.options.mediaElement.duration:(e="99:59:59.999",x.a.t2d(e));var e}},{key:"hasChannelData",get:function(){return!!this.decoder.channelData.byteLength}},{key:"playing",get:function(){var e=this.options.mediaElement;return!!e&&!!(e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2)}},{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return fe("object"===ue.a.kindOf(e),"setOptions expects to receive object as a parameter."),"string"===typeof e.container&&(e.container=document.querySelector(e.container)),"string"===typeof e.mediaElement&&(e.mediaElement=document.querySelector(e.mediaElement)),this.options=ue()(Object(p.a)(Object(p.a)(Object(p.a)({},t.default),this.options),e),t.scheme),this.emit("options",this.options),this}},{key:"load",value:function(e){return e&&"function"===typeof e.getChannelData?(this.decoder.decodeSuccess(e),this.emit("load"),this):((e instanceof HTMLVideoElement||e instanceof HTMLAudioElement)&&(this.options.mediaElement=e,e=e.src),fe("string"===typeof e&&e.trim(),"The load target is not a string. If you are loading a mediaElement, make sure the mediaElement.src is not empty."),this.loader.load(e),this.emit("load"),this)}},{key:"seek",value:function(e){return fe("number"===typeof e,"seek expects to receive number as a parameter."),this._currentTime=ge(e,0,this.duration),this.options.mediaElement&&this.options.mediaElement.currentTime!==this._currentTime&&(this.options.mediaElement.currentTime=this._currentTime),this.drawer.update(),this}},{key:"changeChannel",value:function(e){this.setOptions({channel:e}),this.decoder.changeChannel(e)}},{key:"exportImage",value:function(){return this.template.exportImage(),this}},{key:"destroy",value:function(){this.isDestroy=!0,this.events.destroy(),this.template.destroy(),this.controller.destroy(),this.decoder.destroy(),this.loader.destroy(),Ee.splice(Ee.indexOf(this),1)}}],[{key:"instances",get:function(){return Ee}},{key:"version",get:function(){return"__VERSION__"}},{key:"env",get:function(){return"__ENV__"}},{key:"default",get:function(){return{container:"#waveform",mediaElement:null,wave:!0,waveColor:"rgba(255, 255, 255, 0.1)",backgroundColor:"rgb(28, 32, 34)",paddingColor:"rgba(255, 255, 255, 0.05)",cursor:!0,cursorColor:"#ff0000",progress:!0,progressColor:"rgba(255, 255, 255, 0.5)",grid:!0,gridColor:"rgba(255, 255, 255, 0.05)",ruler:!0,rulerColor:"rgba(255, 255, 255, 0.5)",rulerAtTop:!0,withCredentials:!1,cors:!1,headers:{},channel:0,duration:10,padding:5,waveScale:.8,pixelRatio:Math.ceil(window.devicePixelRatio)}}},{key:"scheme",get:function(){var e=function(e,n,t,a){return function(r,i){return fe("number"===i,"".concat(e," expects to receive number as a parameter, but got ").concat(i,".")),fe(r>=n&&r<=t&&(!a||Number.isInteger(r)),"'options.".concat(e,"' expect ").concat(a?"an integer ":"a ","number that >= ").concat(n," and <= ").concat(t,", but got ").concat(r,".")),!0}};return{container:"htmlelement|htmldivelement",mediaElement:"null|htmlvideoelement|htmlaudioelement",wave:"boolean",waveColor:"string",backgroundColor:"string",paddingColor:"string",cursor:"boolean",cursorColor:"string",progress:"boolean",progressColor:"string",grid:"boolean",gridColor:"string",ruler:"boolean",rulerColor:"string",rulerAtTop:"boolean",withCredentials:"boolean",cors:"boolean",headers:"object",channel:e("channel",0,5,!0),duration:e("duration",1,100,!0),padding:e("padding",1,100,!0),waveScale:e("waveScale",.1,10,!1),pixelRatio:e("pixelRatio",1,10,!1)}}}]),t}(de),Re=t(97),Ne=T.b.div(ye||(ye=Object(y.a)(["\n    position: absolute;\n    z-index: 9;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n\n    .react-contextmenu-wrapper {\n        position: absolute;\n        z-index: 9;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        pointer-events: all;\n    }\n\n    .sub-item {\n        position: absolute;\n        top: 30%;\n        left: 0;\n        height: 40%;\n        overflow: hidden;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        text-align: center;\n        color: #fff;\n        font-size: 14px;\n        cursor: move;\n        user-select: none;\n        pointer-events: all;\n        background-color: rgba(255, 255, 255, 0.2);\n        border: 1px solid rgba(255, 255, 255, 0.2);\n\n        &:hover {\n            background-color: rgba(255, 255, 255, 0.3);\n        }\n\n        &.sub-highlight {\n            background-color: rgba(33, 150, 243, 0.5);\n            border: 1px solid rgba(33, 150, 243, 0.5);\n        }\n\n        &.sub-illegal {\n            background-color: rgba(199, 81, 35, 0.5);\n        }\n\n        .sub-handle {\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            z-index: 1;\n            height: 100%;\n            cursor: col-resize;\n            user-select: none;\n            &:hover {\n                background-color: rgba(255, 255, 255, 0.1);\n            }\n        }\n\n        .sub-text {\n            position: relative;\n            z-index: 0;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            flex-direction: column;\n            word-break: break-all;\n            white-space: nowrap;\n            text-shadow: rgb(0 0 0) 1px 0px 1px, rgb(0 0 0) 0px 1px 1px, rgb(0 0 0) -1px 0px 1px,\n                rgb(0 0 0) 0px -1px 1px;\n            width: 100%;\n            height: 100%;\n\n            p {\n                margin: 2px 0;\n                line-height: 1;\n\n                &.bilingual {\n                    transform: scale(0.8);\n                }\n            }\n        }\n\n        .sub-duration {\n            opacity: 0.5;\n            position: absolute;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            width: 100%;\n            text-align: center;\n            font-size: 12px;\n        }\n    }\n"])));function De(e,n){return n&&e>n-.1&&n+.1>e?n:e}var Le,Ae=null,ze=null,_e="",Ie=0,Me=-1,Pe=0,Fe=0,Ue=!1,Be=r.a.memo((function(e){var n,t,i,o=e.player,s=e.subtitle,c=e.render,l=e.currentTime,u=e.checkSub,m=e.removeSub,h=e.hasSub,f=e.updateSub,p=e.mergeSub,g=r.a.createRef(),y=r.a.createRef(),v=(n=s,t=c.beginTime,i=c.duration,n.filter((function(e){return e.startTime>=t&&e.startTime<=t+i||e.endTime>=t&&e.endTime<=t+i||e.startTime<t&&e.endTime>t+i}))),k=document.body.clientWidth/c.gridNum,j=v.findIndex((function(e){return e.startTime<=l&&e.endTime>l})),O=function(e,n,t){ze=e,0===n.button&&(Ue=!0,_e=t,Ie=n.pageX,Me=v.indexOf(e),Ae=y.current.children[Me],Pe=parseFloat(Ae.style.width))},w=Object(a.useCallback)((function(e){Ue&&Ae&&(Fe=e.pageX-Ie,"left"===_e?(Ae.style.width="".concat(Pe-Fe,"px"),Ae.style.transform="translate(".concat(Fe,"px)")):"right"===_e?Ae.style.width="".concat(Pe+Fe,"px"):Ae.style.transform="translate(".concat(Fe,"px)"))}),[]),T=Object(a.useCallback)((function(){if(Ue&&Ae&&Fe){var e=Fe/k/10,n=h(ze),t=s[n-1],a=s[n+1],r=De(ze.startTime+e,t?t.endTime:null),i=De(ze.endTime+e,a?a.startTime:null),o=10*(i-r)*k;if(t&&i<t.startTime||a&&r>a.endTime);else if("left"===_e)if(r>=0&&ze.endTime-r>=.2){var c=x.a.d2t(r);f(ze,{start:c})}else Ae.style.width="".concat(o,"px");else if("right"===_e)if(i>=0&&i-ze.startTime>=.2){var l=x.a.d2t(i);f(ze,{end:l})}else Ae.style.width="".concat(o,"px");else if(r>0&&i>0&&i-r>=.2){var u=x.a.d2t(r),d=x.a.d2t(i);f(ze,{start:u,end:d})}else Ae.style.width="".concat(o,"px");Ae.style.transform="translate(0)"}_e="",Ie=0,Pe=0,Fe=0,Ue=!1}),[k,h,s,f]),S=Object(a.useCallback)((function(e){var n=v[Me];if(n&&Ae)switch(d(e)){case 37:f(n,{start:x.a.d2t(n.startTime-.1),end:x.a.d2t(n.endTime-.1)}),o.currentTime=n.startTime-.1;break;case 39:f(n,{start:x.a.d2t(n.startTime+.1),end:x.a.d2t(n.endTime+.1)}),o.currentTime=n.startTime+.1;break;case 8:case 46:m(n)}}),[v,o,m,f]);return Object(a.useEffect)((function(){return document.addEventListener("mousemove",w),document.addEventListener("mouseup",T),window.addEventListener("keydown",S),function(){document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",T),window.removeEventListener("keydown",S)}}),[w,T,S]),Object(V.jsxs)(Ne,{ref:g,children:[Object(V.jsx)("div",{ref:y,children:v.map((function(e,n){return Object(V.jsx)("div",{className:["sub-item",n===j?"sub-highlight":"",u(e)?"sub-illegal":""].join(" ").trim(),style:{left:c.padding*k+(e.startTime-c.beginTime)*k*10,width:(e.endTime-e.startTime)*k*10},onClick:function(){o.duration>=e.startTime&&(o.currentTime=e.startTime+.001)},onDoubleClick:function(n){return function(e,n){var t=n.currentTarget,a=h(e),r=s[a-1],i=s[a+1];if(r&&i){var o=10*(i.startTime-r.endTime)*k;t.style.width="".concat(o,"px");var c=x.a.d2t(r.endTime),l=x.a.d2t(i.startTime);f(e,{start:c,end:l})}}(e,n)},children:Object(V.jsxs)(Re.b,{id:"contextmenu",holdToDisplay:-1,children:[Object(V.jsx)("div",{className:"sub-handle",style:{left:0,width:10},onMouseDown:function(n){return O(e,n,"left")}}),Object(V.jsx)("div",{className:"sub-text",title:e.text,onMouseDown:function(n){return O(e,n)},children:"".concat(e.text).split(/\r?\n/).map((function(e,n){return Object(V.jsx)("p",{children:e},n)}))}),Object(V.jsx)("div",{className:"sub-handle",style:{right:0,width:10},onMouseDown:function(n){return O(e,n,"right")}}),Object(V.jsx)("div",{className:"sub-duration",children:e.duration})]})},n)}))}),Object(V.jsxs)(Re.a,{id:"contextmenu",children:[Object(V.jsx)(Re.c,{onClick:function(){return m(ze)},children:Object(V.jsx)(b.Translate,{value:"DELETE"})}),Object(V.jsx)(Re.c,{onClick:function(){return p(ze)},children:Object(V.jsx)(b.Translate,{value:"MERGE"})})]})]})}),(function(e,n){return w()(e.subtitle,n.subtitle)&&w()(e.render,n.render)&&e.currentTime===n.currentTime})),Ge=T.b.div(Le||(Le=Object(y.a)(["\n    position: absolute;\n    z-index: 8;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    cursor: ew-resize;\n    user-select: none;\n\n    .templet {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        height: 100%;\n        background-color: rgba(76, 175, 80, 0.5);\n        border-left: 1px solid rgba(76, 175, 80, 0.8);\n        border-right: 1px solid rgba(76, 175, 80, 0.8);\n        user-select: none;\n        pointer-events: none;\n    }\n"])));var Xe,He=!1;function Ve(e){var n=e.render,t=e.subtitle,r=e.newSub,i=e.addSub,o=e.player,s=e.playing,c=Object(a.useState)(0),l=Object(g.a)(c,2),u=l[0],d=l[1],m=Object(a.useState)(0),h=Object(g.a)(m,2),f=h[0],p=h[1],y=document.body.clientWidth/n.gridNum,v=Object(a.useCallback)((function(e){return(e.pageX-n.padding*y)/y/10+n.beginTime}),[y,n]),k=Object(a.useCallback)((function(e){if(0===e.button){var n=v(e);He=!0,d(n)}}),[v]),j=Object(a.useCallback)((function(e){He&&(s&&o.pause(),p(v(e)))}),[s,o,v]),O=Object(a.useCallback)((function(){if(He&&u>0&&f>0&&f-u>=.2){var e=(s=u,(o=t).findIndex((function(e,n){return s>=e.endTime&&!o[n+1]||e.startTime<=s&&e.endTime>s||s>=e.endTime&&o[n+1]&&s<o[n+1].startTime}))+1),n=x.a.d2t(u),a=x.a.d2t(f);i(e,r({start:n,end:a,text:Object(b.t)("SUB_TEXT")}))}var o,s;He=!1,d(0),p(0)}),[i,r,f,u,t]);return Object(a.useEffect)((function(){return document.addEventListener("mouseup",O),function(){document.removeEventListener("mouseup",O)}}),[O]),Object(V.jsx)(Ge,{onMouseDown:k,onMouseMove:j,children:o&&!s&&u&&f&&f>u?Object(V.jsx)("div",{className:"templet",style:{left:n.padding*y+(u-n.beginTime)*y*10,width:(f-u)*y*10}}):null})}var We,Ke=T.b.div(Xe||(Xe=Object(y.a)(["\n    position: relative;\n    display: flex;\n    flex-direction: column;\n\n    .progress {\n        position: absolute;\n        left: 0;\n        right: 0;\n        top: -12px;\n        z-index: 11;\n        width: 100%;\n        height: 12px;\n        user-select: none;\n        border-top: 1px solid rgb(255 255 255 / 20%);\n        background-color: rgb(0 0 0 / 50%);\n\n        .bar {\n            position: absolute;\n            left: 0;\n            top: 0;\n            bottom: 0;\n            width: 0%;\n            height: 100%;\n            display: inline-block;\n            background-color: #730000;\n            overflow: hidden;\n\n            .handle {\n                position: absolute;\n                right: 0;\n                top: 0;\n                bottom: 0;\n                width: 10px;\n                cursor: ew-resize;\n                background-color: #ff9800;\n            }\n        }\n\n        .subtitle {\n            position: absolute;\n            left: 0;\n            top: 0;\n            bottom: 0;\n            right: 0;\n            width: 100%;\n            height: 100%;\n            pointer-events: none;\n\n            span {\n                position: absolute;\n                top: 0;\n                bottom: 0;\n                height: 100%;\n                background-color: rgb(255 255 255 / 20%);\n            }\n        }\n    }\n\n    .duration {\n        position: absolute;\n        left: 0;\n        right: 0;\n        top: -40px;\n        z-index: 12;\n        width: 100%;\n        font-size: 18px;\n        color: rgb(255 255 255 / 75%);\n        text-shadow: 0 1px 2px rgb(0 0 0 / 75%);\n        text-align: center;\n        user-select: none;\n        pointer-events: none;\n    }\n\n    .waveform {\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        z-index: 1;\n        width: 100%;\n        height: 100%;\n        z-index: 1;\n        user-select: none;\n        pointer-events: none;\n    }\n\n    .grab {\n        position: relative;\n        z-index: 11;\n        cursor: grab;\n        height: 20%;\n        user-select: none;\n        background-color: rgb(33 150 243 / 20%);\n        border-top: 1px solid rgb(33 150 243 / 30%);\n        border-bottom: 1px solid rgb(33 150 243 / 30%);\n\n        &.grabbing {\n            cursor: grabbing;\n        }\n    }\n"]))),Ye=Object(a.memo)((function(e){var n=e.player,t=e.setWaveform,r=e.setRender,i=Object(a.createRef)();return Object(a.useEffect)((function(){Object(ie.a)(Ce.instances).forEach((function(e){return e.destroy()}));var e=new Ce({duration:10,padding:1,wave:!0,pixelRatio:2,container:i.current,mediaElement:n,backgroundColor:"rgba(0, 0, 0, 0)",waveColor:"rgba(255, 255, 255, 0.2)",progressColor:"rgba(255, 255, 255, 0.5)",gridColor:"rgba(255, 255, 255, 0.05)",rulerColor:"rgba(255, 255, 255, 0.5)",paddingColor:"rgba(0, 0, 0, 0)"});t(e),e.on("render",r),e.load({sampleRate:44100,getChannelData:function(){return new Float32Array}}),e.load("/sample.mp3")}),[n,i,t,r]),Object(V.jsx)("div",{className:"waveform",ref:i})}),(function(){return!0})),qe=function(e){var n=Object(a.useState)(0),t=Object(g.a)(n,2),r=t[0],i=t[1],o=Object(a.useState)(0),s=Object(g.a)(o,2),c=s[0],l=s[1],u=Object(a.useState)(!1),d=Object(g.a)(u,2),m=d[0],b=d[1],h=Object(a.useCallback)((function(n){0===n.button&&(i(n.pageX),l(e.player.currentTime),b(!0))}),[e.player]),f=function(){i(0),l(0),b(!1)},p=Object(a.useCallback)((function(n){if(m&&e.player&&e.waveform){var t=z()(c-(n.pageX-r)/document.body.clientWidth*10,0,e.player.duration);e.player.currentTime=t,e.waveform.seek(t)}}),[m,e.player,e.waveform,r,c]);return Object(a.useEffect)((function(){return document.addEventListener("mouseup",f),function(){return document.removeEventListener("mouseup",f)}}),[]),Object(V.jsx)("div",{className:"grab ".concat(m?"grabbing":""),onMouseDown:h,onMouseMove:p})},Je=function(e){var n=Object(a.useState)(!1),t=Object(g.a)(n,2),r=t[0],i=t[1],o=Object(a.useCallback)((function(n){if(0===n.button){var t=n.pageX/document.body.clientWidth*e.player.duration;e.player.currentTime=t,e.waveform.seek(t)}}),[e]),s=Object(a.useCallback)((function(e){0===e.button&&i(!0)}),[i]),c=Object(a.useCallback)((function(n){if(r){var t=n.pageX/document.body.clientWidth*e.player.duration;e.player.currentTime=t}}),[r,e.player]),l=Object(a.useCallback)((function(){r&&(i(!1),e.waveform.seek(e.player.currentTime))}),[r,e.waveform,e.player.currentTime]);return Object(a.useEffect)((function(){return document.addEventListener("mouseup",l),document.addEventListener("mousemove",c),function(){document.removeEventListener("mouseup",l),document.removeEventListener("mousemove",c)}}),[l,c]),Object(V.jsxs)("div",{className:"progress",onClick:o,children:[Object(V.jsx)("div",{className:"bar",style:{width:"".concat(e.currentTime/e.player.duration*100,"%")},children:Object(V.jsx)("div",{className:"handle",onMouseDown:s})}),Object(V.jsx)("div",{className:"subtitle",children:e.subtitle.map((function(n,t){var a=e.player.duration;return Object(V.jsx)("span",{className:"item",style:{left:"".concat(n.startTime/a*100,"%"),width:"".concat(n.duration/a*100,"%")}},t)}))})]})},$e=function(e){var n=Object(a.useCallback)((function(e){return e=e===1/0?0:e,x.a.d2t(e).split(".")[0]}),[]);return Object(V.jsx)("div",{className:"duration",children:Object(V.jsxs)("span",{children:[n(e.currentTime)," / ",n(e.player.duration||0)]})})};function Ze(e){var n=Object(a.createRef)(),t=Object(a.useState)({padding:2,duration:10,gridGap:10,gridNum:110,beginTime:-5}),i=Object(g.a)(t,2),o=i[0],s=i[1],c=Object(a.useCallback)((function(t){if(e.player&&e.waveform&&!e.player.playing&&n.current&&n.current.contains(t.target)){var a=Math.sign(t.deltaY)/5,r=z()(e.player.currentTime+a,0,e.player.duration);e.player.currentTime=r,e.waveform.seek(r)}}),[e.waveform,e.player,n]);return Object(a.useEffect)((function(){var e=xe()(c,100);return window.addEventListener("wheel",e),function(){return window.removeEventListener("wheel",e)}}),[c]),Object(V.jsx)(Ke,{className:"footer",ref:n,children:e.player?Object(V.jsxs)(r.a.Fragment,{children:[Object(V.jsx)(Je,Object(p.a)({},e)),Object(V.jsx)($e,Object(p.a)({},e)),Object(V.jsx)(Ye,Object(p.a)(Object(p.a)({},e),{},{setRender:s})),Object(V.jsx)(qe,Object(p.a)(Object(p.a)({},e),{},{render:o})),Object(V.jsx)(Ve,Object(p.a)(Object(p.a)({},e),{},{render:o})),Object(V.jsx)(Be,Object(p.a)(Object(p.a)({},e),{},{render:o}))]}):null})}var Qe,en=T.b.div(We||(We=Object(y.a)(["\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    -webkit-backdrop-filter: saturate(180%) blur(2px);\n    backdrop-filter: saturate(180%) blur(2px);\n    background-color: rgba(0, 0, 0, 0.5);\n\n    .loading-inner {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        flex-direction: column;\n        width: 200px;\n        height: 200px;\n        border-radius: 10px;\n        color: #fff;\n        background-color: rgb(34 36 60 / 95%);\n        box-shadow: 0 0 3px 0 rgba(0, 0, 0, 0.5);\n\n        img {\n            zoom: 0.5;\n            margin-bottom: 10px;\n        }\n    }\n"])));function nn(e){var n=e.loading;return Object(V.jsx)(en,{children:Object(V.jsxs)("div",{className:"loading-inner",children:[Object(V.jsx)("img",{src:"/loading.svg",alt:"loading"}),Object(V.jsx)("div",{children:n||Object(b.t)("LOADING")})]})})}var tn,an=T.b.div(Qe||(Qe=Object(y.a)(["\n    height: 100%;\n    width: 100%;\n\n    .main {\n        display: flex;\n        height: calc(100% - 200px);\n\n        .player {\n            flex: 1;\n        }\n\n        .tool {\n            width: 300px;\n        }\n    }\n\n    .footer {\n        height: 200px;\n    }\n"])));function rn(e){var n=e.defaultLang,t=Object(a.useRef)([]),r=Object(a.useRef)(null),i=Object(a.useState)(null),o=Object(g.a)(i,2),s=o[0],c=o[1],l=Object(a.useState)(""),u=Object(g.a)(l,2),m=u[0],b=u[1],h=Object(a.useState)(n),f=Object(g.a)(h,2),y=f[0],v=f[1],j=Object(a.useState)([]),O=Object(g.a)(j,2),T=O[0],S=O[1],E=Object(a.useState)(null),C=Object(g.a)(E,2),R=C[0],N=C[1],D=Object(a.useState)(!1),L=Object(g.a)(D,2),A=L[0],z=L[1],I=Object(a.useState)(0),M=Object(g.a)(I,2),P=M[0],F=M[1],U=Object(a.useState)(-1),B=Object(g.a)(U,2),G=B[0],X=B[1],H=Object(a.useCallback)((function(e){return new _(e)}),[]),W=Object(a.useCallback)((function(e){return T.indexOf(e)}),[T]),K=Object(a.useCallback)((function(e){return Array.isArray(e)?e.map((function(e){return H(e)})):H(e)}),[H]),Y=Object(a.useCallback)((function(){return K(T)}),[T,K]),q=Object(a.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];w()(e,T)||(n&&(t.current.length>=1e3&&t.current.shift(),t.current.push(K(T))),window.localStorage.setItem("subtitle",JSON.stringify(e)),S(e))}),[T,S,K]),J=Object(a.useCallback)((function(){var e=t.current.pop();e&&q(e,!1)}),[q,t]),Z=Object(a.useCallback)((function(){q([]),t.current.length=0}),[q,t]),Q=Object(a.useCallback)((function(e){var n=W(e);if(!(n<0)){var t=T[n-1];return t&&e.startTime<t.endTime||!e.check||e.duration<.2}}),[T,W]),ee=Object(a.useCallback)((function(e){var n=r.current;n.clearNotifications(),n.addNotification({position:"tc",dismissible:"none",autoDismiss:2,message:e.message,level:e.level})}),[r]),ne=Object(a.useCallback)((function(e){var n=W(e);if(!(n<0)){var t=Y();t.splice(n,1),q(t)}}),[W,Y,q]),te=Object(a.useCallback)((function(e,n){var t=Y();t.splice(e,0,K(n)),q(t)}),[Y,q,K]),ae=Object(a.useCallback)((function(e,n){var t=W(e);if(!(t<0)){var a=Y(),r=K(e);Object.assign(r,n),r.check&&(a[t]=r,q(a))}}),[W,Y,q,K]),ie=Object(a.useCallback)((function(e){var n=W(e);if(!(n<0)){var t=Y(),a=t[n+1];if(a){var r=H({start:e.start,end:a.end,text:e.text.trim()+"\n"+a.text.trim()});t[n]=r,t.splice(n+1,1),q(t)}}}),[W,Y,q,H]),oe=Object(a.useCallback)((function(e,n){var t=W(e);if(!(t<0)&&e.text&&n){var a=Y(),r=e.text.slice(0,n).trim(),i=e.text.slice(n).trim();if(r&&i){var o=(e.duration*(n/e.text.length)).toFixed(3);if(!(o<.2||e.duration-o<.2)){a.splice(t,1);var s=x.a.d2t(e.startTime+parseFloat(o));a.splice(t,0,H({start:e.start,end:s,text:r})),a.splice(t+1,0,H({start:s,end:e.end,text:i})),q(a)}}}}),[W,Y,q,H]),se=Object(a.useCallback)((function(e){switch(d(e)){case 32:e.preventDefault(),s&&(A?s.pause():s.play());break;case 90:e.preventDefault(),e.metaKey&&J()}}),[s,A,J]);Object(a.useEffect)((function(){return window.addEventListener("keydown",se),function(){return window.removeEventListener("keydown",se)}}),[se]),Object(a.useMemo)((function(){var e=T.findIndex((function(e){return e.startTime<=P&&e.endTime>P}));X(e)}),[P,T]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("subtitle"),n=function(){return fetch("/sample.json").then((function(e){return e.json()})).then((function(e){S(e.map((function(e){return new _(e)})))}))};if(e)try{var t=JSON.parse(e);t.length?S(t.map((function(e){return new _(e)}))):n()}catch(a){n()}else n()}),[S]);var ce={player:s,setPlayer:c,subtitle:T,setSubtitle:q,waveform:R,setWaveform:N,currentTime:P,setCurrentTime:F,currentIndex:G,setCurrentIndex:X,playing:A,setPlaying:z,language:y,setLanguage:v,loading:m,setLoading:b,subtitleHistory:t,notify:ee,newSub:H,hasSub:W,checkSub:Q,removeSub:ne,addSub:te,undoSubs:J,clearSubs:Z,updateSub:ae,formatSub:K,mergeSub:ie,splitSub:oe};return Object(V.jsxs)(an,{children:[Object(V.jsxs)("div",{className:"main",children:[Object(V.jsx)(re,Object(p.a)({},ce)),Object(V.jsx)($,Object(p.a)({},ce))]}),Object(V.jsx)(Ze,Object(p.a)({},ce)),m?Object(V.jsx)(nn,{loading:m}):null,Object(V.jsx)(k.a,{ref:r,allowHTML:!0})]})}var on,sn=T.b.div(tn||(tn=Object(y.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 100%;\n"])));function cn(){return Object(V.jsx)(sn,{children:Object(V.jsx)(b.Translate,{value:"MOBILE_TIP"})})}var ln=Object(T.a)(on||(on=Object(y.a)(["\n    html,\n    body,\n    #root {\n        height: 100%;\n    }\n\n    body {\n        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;\n        line-height: 1.5;\n        overflow: hidden;\n    }\n\n    *, *::before, *::after {\n        box-sizing: border-box;\n    }\n\n    #root {\n        display: flex;\n        font-size: 14px;\n        color: #ccc;\n        background-color: rgb(0 0 0 / 90%);\n    }\n\n    ::-webkit-scrollbar {\n        width: 5px;\n    }\n\n    ::-webkit-scrollbar-thumb {\n        background-color: #999;\n    }\n\n    ::-webkit-scrollbar-thumb:hover {\n        background-color: #ccc;\n    }\n"])));Object(b.setTranslations)(f);var un=navigator.language.toLowerCase(),dn=f[un]?un:"en";Object(b.setLocale)(dn),o.a.render(Object(V.jsxs)(r.a.Fragment,{children:[Object(V.jsx)(ln,{}),c?Object(V.jsx)(cn,{}):Object(V.jsx)(rn,{defaultLang:dn})]}),document.getElementById("root"))}},[[689,1,2]]]);
//# sourceMappingURL=main.4e69c9b2.chunk.js.map